"use strict";function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}!function(){var t=angular.module("entifix-js",["app.config","angular-jwt","angular-md5","entifix-security-management"]);function n(){var t=this;return t.CreateStringHtmlComponent=function(t){var n="";if(t.bindings&&0<t.bindings.length)for(var e=0;e<t.bindings.length;e++)n+=t.bindings[e].name+'="'+t.bindings[e].value+'"';var o="<"+t.name;return 0<n.length&&(o+=" "+n),o+="></"+t.name+">"},t.CreateStringHtmlComponentAndBindings=function(t,n){var e="",o={};if(t.bindings&&0<t.bindings.length)for(var r=0;r<t.bindings.length;r++){var i=t.bindings[r],c=i.name+"=",u=!1;"string"==typeof i.value&&(c+='"'+i.value,u=!0),!u&&n&&null!=i.value&&(c+='"'+n+"."+i.name,o[i.name]=i.value,u=!0),u&&(e+=" "+c+(i.isExecutable?'()"':'"'))}var s="<"+t.name;return 0<e.length&&(s+=e),{stringhtml:s+="></"+t.name+">",objectbindings:o}},t}t.directive("compile",["$compile",function(r){return function(n,e,o){n.$watch(function(t){return t.$eval(o.compile)},function(t){e.html(t),r(e.contents())(n)})}}]),t.service("BaseComponentFunctions",n),n.$inject=[]}(),angular.module("entifix-js").directive("entifixElasticTextArea",["$timeout",function(o){return{restrict:"A",link:function(t,n){t.initialHeight=t.initialHeight||n[0].style.height;var e=function(){""!=t.initialHeight?(n[0].style.height=t.initialHeight,t.initialHeight=""):n[0].style.height=n[0].scrollHeight+"px"};n.on("input change",e),o(e,0)}}}]),angular.module("entifix-js").directive("entifixFileread",[function(){return{require:"ngModel",link:function(t,e,n,o){e.on("change",function(t){var n=e[0].files[0];o.$setViewValue(n)})}}}]),angular.module("entifix-js").directive("entifixNextFocus",function(){return{restrict:"A",link:function(t,n,s){n.bind("keydown",function(t){var n,e,o=t.keyCode||t.which;if(13===o||39===o||9===o){var r;t.preventDefault();var i=document.querySelectorAll(s.nextFocus);t.target,r=!1,e=i.length;for(var c=0;c<e;c++){var u=i[c];if(r){if("none"!==u.style.display){u.focus();break}}else u===t.target&&(r=!0)}}if(37===o)for(t.preventDefault(),i=document.querySelectorAll(s.nextFocus),t.target,n=!1,c=(e=i.length)-1;0<=c;c--)if(u=i[c],n){if("none"!==u.style.display){u.focus();break}}else u===t.target&&(n=!0)})}}}),angular.module("entifix-js").directive("entifixNumberBlock",function(){return{restrict:"A",link:function(t,n,e){"true"==e.numberValidation&&n.bind("keydown",function(t){var n=t.keyCode||t.which;8===n||46===n||110===n||190===n||9===n||37===n||39===n||48<=n&&n<=57||96<=n&&n<=105||t.preventDefault()})}}}),angular.module("entifix-js").directive("entifixNumberValidation",function(){return{require:"ngModel",link:function(t,n,e,o){"true"==e.numberValidation&&o.$parsers.push(function(t){return o.$isEmpty(t)?(o.$setValidity("number",!0),null):!isNaN(parseFloat(t))&&isFinite(t)?(o.$setValidity("number",!0),t):void o.$setValidity("number",!1)})}}}),angular.module("entifix-js").directive("entifixSecurityContext",["EntifixSession","$compile",function(r,i){return{restrict:"A",priority:1001,terminal:!0,scope:{perm:"&permission"},compile:function(t,n){var e=n.entifixSecurityContext;t.removeAttr("entifix-security-context"),r.checkPermissions(e)?t.attr("ng-if",!0):t.attr("ng-if",!1);var o=i(t);return function(t){o(t)}}}}]),function(){function t(){return function(){var p=[];function i(n,e,o){if("navigation"==e.type){if(!(p&&0<p.length&&0<p.filter(function(t){return t.property==e.property}).length)){var t=(r=e,i=[{property:"operator",value:"or"}],n.forEach(function(t){i.push({property:r.resource.getKeyProperty.get(),value:t[r.property]})}),i);e.resource.getEnumerationBind(e.display,function(t){p.push({property:e.property,enumResult:t}),c(n,e,o)},null,t)}c(n,e,o)}else c(n,e,o);var r,i}function c(t,a,l){t.forEach(function(r){var i=r[a.property];if("date"==a.type||"datetime"==a.type){var t=new Date(i),n=t.getFullYear(),e=(t.getMonth()+1).toString(),o=t.getDate().toString();if(e.length<2&&(e="0"+e),o.length<2&&(o="0"+o),"datetime"==a.type){var c=t.getHours().toString(),u=t.getMinutes().toString(),s=t.getSeconds().toString();c.length<2&&(c="0"+c),u.length<2&&(u="0"+u),s.length<2&&(s="0"+s),r[a.outProperty||a.property]=o+"/"+e+"/"+n+" "+c+":"+u}else r[a.outProperty||a.property]=o+"/"+e+"/"+n;l()}if("navigation"==a.type){p&&0<p.length&&0<p.filter(function(t){return t.property==a.property&&t.enumResult.length}).length&&function(){var t=p.filter(function(t){return t.property==a.property});if(0<t.length){var n=t[0].enumResult;if(n&&0<n.length){var e=i;i instanceof Object&&(e=a.resource.getId(i));var o=n.filter(function(t){return t.Value==e});0<o.length&&(r[a.outProperty||a.property]=o[0].Display),l()}}}()}"bool"==a.type&&(r[a.outProperty||a.property]=i?"Si":"No")})}this.transform=function(e){return new Promise(function(t,n){i(e.collection,e,function(){t()})})},this.transformMultiple=function(r){return p=[],new Promise(function(n,t){var e=0,o=0;r.properties.forEach(function(t){i(r.collection,t,function(){++e>=r.collection.length&&(e=0,++o>=r.properties.length&&n())})})})}}}angular.module("entifix-js").factory("EntifixCollectionFormatter",t),t.$inject=[]}(),function(){function t(n,e,t,o,r){this.unauthorizedError=function(t){n.devMode.get()?console.warn("DevMode: No auth application registered"):(n.redirect.set(n.thisApplication.get()),n.authApp.set(n.authUrl.get()),e.location.href=n.authApplication.get())},this.notFoundError=function(t){r.show(r.simple().textContent("¡Error 404! El recurso solicitado no fue encontrado.").position("bottom right").hideDelay(3e3))},this.preconditionFailedError=function(t){o.show({templateUrl:"dist/shared/components/entifixPreconditionFailedError/entifixPreconditionFailedError.html",controller:"PreconditionFailedErrorController",parent:angular.element(document.body),clickOutsideToClose:!1,escapeToClose:!1,fullscreen:!0,controllerAs:"vm",locals:{sessionData:{subject:n.currentUser.get(),authTokenName:n.authTokenName.get(),currentWorkgroup:n.currentWorkgroup.get()}}}).then(function(){},function(){})},this.internalServerError=function(t){r.show(r.simple().textContent("¡Error 500! El recurso solicitado presenta un error en el servidor.").position("bottom right").hideDelay(3e3))}}angular.module("entifix-js").service("EntifixErrorManager",t),t.$inject=["EntifixSession","$window","AppRedirects","$mdDialog","$mdToast"]}(),function(){function t(t){var i=this;function o(n){var e=globalMetadata.resources.filter(function(t){return t.name==n})[0];return e.base?globalMetadata.resources.filter(function(t){return t.name==e.base})[0]:null}function r(n){return globalMetadata.resources.filter(function(t){return t.name==n})[0]}i.metadata={get:function(){return globalMetadata}},i.getDefinedMembers=function(t){var n=r(t).definedMembers||[];if(!r(t).denyInheritance)for(var e=o(t);e;)e.definedMembers&&(n=n.concat(e.definedMembers)),e=e.denyInheritance?null:o(e.name);return n},i.getExcludedMembers=function(t){for(var n=r(t).excludeMembers||[],e=o(t);e;)e.excludeMembers&&(n=n.concat(e.excludeMembers)),e=o(e.name);return n},i.getTransformProperties=function(t){return i.getDefinedMembers(t).filter(function(t){return t.transformType})},i.getPaginableProperties=function(t){return i.getDefinedMembers(t).filter(function(t){return t.paginable})},i.getJoinProperties=function(t){return i.getDefinedMembers(t).filter(function(t){return t.joinable})},i.getResourceProperties=function(t){return i.getDefinedMembers(t)},i.getKeyProperty=function(t){for(var n=r(t).keyProperty,e=o(t);e&&!n;)e.keyProperty&&(n=e.keyProperty),e=o(e.name);return n||(n="id"),n},i.getOpProperty=function(t){for(var n=r(t).opProperty,e=o(t);e&&!n;)e.opProperty&&(n=e.opProperty),e=o(e.name);return n||(n="op"),n},i.getResourceURL=function(t){for(var n=r(t).url,e=o(t);e;)e&&e.url&&(n=e.url+"/"+n),e=o(e.name);return n},i.getTypeInfo=function(t){var n=r(t).type;if(!n)for(var e=o(t);e&&!n;)e.type&&(n=e.type),e=o(e.name);return n},i.allowUrlPrefix=function(t){var n=r(t).allowUrlPrefix;if(!n)for(var e=o(t);e&&!n;)n=e.allowUrlPrefix,e=o(e.name);return n||!1},i.denyBarPrefix=function(t){return r(t).denyBarPrefix||!1},i.getDefaultUrl=function(t){var n=r(t).defaultUrl;return n||(n="default"),n},i.isFormDataRequest=function(t){return!!r(t).formDataRequest},i.getStartDateProperty=function(t){var n=i.getDefinedMembers(t),e=null;return 0<n.length&&n.forEach(function(t){return!t.startDate||(e=t.name,!1)}),e},i.getEndDateProperty=function(t){var n=i.getDefinedMembers(t),e=null;return 0<n.length&&n.every(function(t){return!t.endDate||(e=t.name,!1)}),e},i.getNotApplyProperty=function(t){var n=i.getDefinedMembers(t),e=null;return 0<n.length&&n.every(function(t){return!t.notApply||(e=t.name,!1)}),e},i.isProcessedEntity=function(t,n){var e,o,r=i.getDefinedMembers(t);return 0<r.length&&r.every(function(t){return!t.processedValue||(e=t.name,o=t.processedValue,!1)}),n[e]==o}}angular.module("entifix-js").service("EntifixMetadata",t),t.$inject=["$http"]}(),function(){function t(){var t=this;return t.success=function(t,n){t=t||"Acción realizada correctamente",n=n||"¡Hecho!",swal(n,t,"success")},t.error=function(t,n){t=t||"Error al realizar la acción solicitada",n=n||"¡Error!",swal(n,t,"error")},t.info=function(t,n){t=t||"Error al realizar la acción solicitada",n=n||"Información",swal(n,t,"info")},t.confirm=function(t,n,e,o){n=n||"¿Está seguro de proceder?",swal({title:n,text:t,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Sí",cancelButtonText:"No"}).then(e,o)},t}angular.module("entifix-js").service("EntifixNotification",t),t.$inject=[]}(),function(){function t(m){return function(t){var n=this,e="Registro guardado correctamente",o="Registro eliminado correctamente",r="No se pudo guardar el registro correctamente. Por favor inténtelo de nuevo",i="No se pudo eliminar el registro correctamente. Por favor inténtelo de nuevo",c="No se pudo guardar el registro porque no todos los datos están correctos";function u(t){var n=e;t.friendlyMessage&&(n=t.friendlyMessage),m.success(n)}function s(t){var n=o;t.friendlyMessage&&(n=t.friendlyMessage),m.success(n)}function a(t){var n=r;t.friendlyMessage&&(n=t.friendlyMessage),m.error(n)}function l(t){var n=i;t.friendlyMessage&&(n=t.friendlyMessage),m.error(n)}function p(t){var n=c;t.friendlyMessage&&(n=t.friendlyMessage),m.error(n)}n.savedMessage={get:function(){return e},set:function(t){e=t}},n.deletedMessage={get:function(){return o},set:function(t){o=t}},n.errorSaveMessage={get:function(){return r},set:function(t){e=t}},n.errorDeleteMessage={get:function(){return errorDeleteMessage},set:function(t){errorDeleteMessage=t}},n.errorValidationMessage={get:function(){return c},set:function(t){errorValidationMessage=t}},t.listenSaved(u),t.listenDeleted(s),t.listenErrorSave(a),t.listenErrorDelete(l),t.listenNonValidSave(p)}}angular.module("entifix-js").factory("EntifixNotifier",t),t.$inject=["EntifixNotification"]}(),function(){function t(d){return function(n,t,u){var e,s,o,r,i,c,a,l,p=this,m=!1;p.isLoading={get:function(){return m}},p.sizeGetter={get:function(){return c},set:function(t){c=t}},p.pageGetter={get:function(){return a},set:function(t){a=t}},p.searchTextGetter={get:function(){return o},set:function(t){o=t}},p.searchArrayGetter={get:function(){return r},set:function(t){r=t}},p.columnsSelectedGetter={get:function(){return i},set:function(t){i=t}},p.inverseOrder={get:function(){return l},set:function(t){l=t}},p.showPageControls={get:function(){return t&&null!=t.showPageControls?t.showPageControls:!!(p.currentData&&p.currentData.length&&0<p.currentData.length)}};var g={get:function(){return t&&t.inicialSize?t.inicialSize:10}},f={get:function(){return t&&t.inicialPageSizes?t.inicialPageSizes:[10,25,50,100,200]}},C={get:function(){return t&&t.inicialCurrentPage?t.inicialCurrentPage:1}};p.listenBeforeLoad=function(t){e=t},p.listenAfterLoad=function(t){s=t},p.reload=function(){return function(){{if(n.resource)return m=!0,e&&e(),n.resource.getEntityPagination((p.getPage()-1)*p.getSize(),p.getSize(),p.getConstantFilters(),n.resource.getPagFilters(p.getSearchText(),p.getSearchArray(),p.getColumnsSelectedGetter()),n.sort).then(function(t){if(t){for(var n=t.total,e=p.getPage(),o=p.getSize(),r=1;r<=p.getSize();r++)if(l){var i=n-(e-1)*o,c=n-(e-1)*o-i-r;0<c&&(t.resultSet[r].order=c)}else{var c=(e-1)*o+r;c<=n&&(t.resultSet[r-1]?t.resultSet[r-1].order=c:console.info("Error en la paginación de registros. No concuerdan el total en el encabezado y la cantidad registros en el detalle"))}p.formater.transformMultiple({collection:t.resultSet,properties:u}).then(function(){p.currentData=t.resultSet}),p.currentData=t.resultSet,p.totalData=t.total,s&&s()}m=!1},function(t){return m=!1,t});console.error("No se ha construido correctamente el paginador")}}()},p.getSize=function(){return c?c():p.size?p.size:10},p.getPage=function(){return a?a():p.page?p.page:1},p.getConstantFilters=function(){var t=null;return n&&n.constantFilters&&(t=n.constantFilters.getter?n.constantFilters.getter():n.constantFilters),t},p.getSearchText=function(){return o?o():p.searchText?p.searchText:null},p.getSearchArray=function(){return r?r():p.searchArray?p.searchArray:null},p.getColumnsSelectedGetter=function(){return i?i():p.columnsSelected?p.columnsSelected:null},p.getDescriptionText=function(){if(p.currentData&&0<p.currentData.length){var t=(p.getPage()-1)*p.getSize()+1;return"Mostrando del "+t+" al "+(t+p.currentData.length-1)+" de "+p.totalData+" registros"}return"No hay registros que mostrar"},p.sortTableColumns={set:function(t){t&&(n.sort=t)}},p.pageSizes=f.get(),p.size=g.get(),p.page=C.get(),p.formater=new d}}angular.module("entifix-js").factory("EntifixPager",t),t.$inject=["EntifixCollectionFormatter"]}(),function(){function t(V,I,R,L){return function(h){var i=this,u=function(t,n,e,o,r){var i=a();o&&(i=i+"/"+o),e&&(i+=e),n=n||b;var c={method:"GET",url:i};if(r)return V(c);V(c).then(t,n)},m=function(t,n,e){var o=a();e=e||b,A()?(t=r(t),V({method:"POST",url:o,data:c(t),headers:{"Content-Type":void 0}}).then(n,e)):V({method:"POST",url:o,data:r(t)}).then(n,e)},g=function(t,n,e){var o=a();e=e||b,A()?(t=r(t),V({method:"PUT",url:o,data:c(t),headers:{"Content-Type":void 0}}).then(n,e)):V({method:"PUT",url:o,data:r(t)}).then(n,e)},s=function(t,n,e){var o=a();e=e||b,V({method:"DELETE",url:o=o+"/"+t}).then(n,e)},f=function(t,n,e){var o=a();e=e||b,A()?(t=r(t),V({method:"PATCH",url:o,data:c(t),headers:{"Content-Type":void 0}}).then(n,e)):V({method:"PATCH",url:o,data:r(t)}).then(n,e)};function a(){var t=I.baseUrl+I.api,n=i.urlPrefix.get();return n&&(t+=n,D||(t+="/")),t+e}function r(t){var n=R.getTypeInfo(h);n&&t[n.property]&&t[y]&&(t[n.property]=_defineProperty({},n.property,n.value));var e=R.getTransformProperties(h);if(0<e.length)for(var o=0;o<e.length;o++){var r=e[o];if(t[r.name]){if("navigation"==r.transformType){var i=t[r.name];if(!isNaN(i)){var c=i,u=r.keyNavigationProperty||R.getKeyProperty(r.resource);t[r.name]=_defineProperty({},u,c)}}if("date"==r.transformType||"datetime"==r.transformType){var s=new Date(t[r.name]),a=s.getFullYear().toString(),l=(s.getMonth()+1).toString(),p=s.getDate().toString(),m=s.getHours().toString(),g=s.getMinutes().toString(),f=s.getSeconds().toString();l.length<2&&(l="0"+l),p.length<2&&(p="0"+p),m.length<2&&(m="0"+m),g.length<2&&(g="0"+g),f.length<2&&(f="0"+f),t[r.name]=a+"-"+l+"-"+p+" "+m+":"+g+":"+f}}}for(var C in t)"$"==C.substr(0,1)&&delete t[C];var d=R.getExcludedMembers(h);for(o=0;o<d.length;o++)delete t[d[o]];return t}function c(t){var n=new FormData;for(var e in t)n.append(e,t[e]);return n}var n,C=!1,l=!1,p=!1,t=null,d=!1,v=!1,e=R.getResourceURL(h),y=R.getKeyProperty(h),x=R.getOpProperty(h),o=R.allowUrlPrefix(h),D=R.denyBarPrefix(h),b=function(t){C=l=p=!1},E=function(t){switch(t.status){case 401:L.unauthorizedError(t);break;case 404:L.notFoundError(t);break;case 412:L.preconditionFailedError(t);break;case 500:L.internalServerError(t)}},S={save:1,delete:2,load:3,saved:4,deleted:5,loaded:6,errorSave:7,errorDelete:8,errorLoad:9,nonValidSave:10};function T(t){return{friendlyMessage:t.data.friendlyMessage,fullResponse:t}}function M(e,o){return function(t){var n=!t.data.isError;!v&&e&&e(t,n),C=!1,200<=t.status&&t.status<300||E(t),o?O(S.errorSave,T(t)):v||O(n?S.saved:S.nonValidSave,T(t)),v&&e&&e(t)}}function w(n,e){return function(t){n&&n(t),l=!1,200<=t.status&&t.status<300||E(t),O(e?S.errorLoad:S.loaded,T(t))}}function B(n,e){return function(t){!d&&n&&n(t),p=!1,200<=t.status&&t.status<300||E(t),e?O(S.errorDelete,T(t)):d||O(S.deleted,T(t)),d&&n&&n(t)}}function P(t,n,e){l=!0,u(w(function(t){l=!0,n&&n(function(t){if(t){var n=R.getTransformProperties(h);if(0<n.length)for(var e=0;e<n.length;e++){var o=n[e];if(t[o.name]){if("navigation"==o.transformType){var r=(c=t[o.name])[o.keyNavigationProperty||R.getKeyProperty(o.resource)];if(o.propertiesToMembers)for(var i=0;i<o.propertiesToMembers.length;i++)o.propertiesToMembers[i]instanceof Object&&(t[o.propertiesToMembers[i].to||o.propertiesToMembers[i].name]=c[o.propertiesToMembers[i].name]);t[o.name]=r}if("date"==o.transformType||"datetime"==o.transformType){var c=t[o.name];t[o.name]=new Date(c)}}}return t}return null}(t.data.data[0])),l=!1}),w(e),q(t))}function q(t){if(t){var n=null;return isNaN(t)?"string"==typeof t?n=t:t instanceof Array&&(n=function(t){if(t&&t instanceof Array){if(0<t.length){for(var n="?",e=0;e<t.length;e++){var o=t[e].property,r=t[e].value;if(null!=r&&null!=o)if("function"==typeof r){var i=r();i&&(n=n+o+"="+i)}else n=n+o+"="+r;e<t.length-1&&(n+="&")}return n}return null}return null}(t)):n="/"+t,n}return null}function A(){return R.isFormDataRequest(h)}function k(n,t){var e=[];return t.forEach(function(o){var t=n.filter(function(t){return((n=t).display?n.display:n.name?(e=n.name).charAt(0).toUpperCase()+e.substring(1,e.length):null)==o;var n,e});0<t.length&&e.push(t[0])}),e}function F(n,e){t?0==t.filter(function(t){return t.callback===n&&t.type==e}).length&&t.push({callback:n,type:e}):t=[{callback:n,type:e}]}function O(n,e){t&&0<t.length&&t.filter(function(t){return t.type==n}).forEach(function(t){t.callback(e)})}i.resourceName={get:function(){return h}},i.isSaving={get:function(){return C||v}},i.isLoading={get:function(){return l}},i.isDeleting={get:function(){return p||d}},i.events={get:function(){return t}},i.onMultipleDeletion={get:function(){return d},set:function(t){d=t}},i.onMultipleStorage={get:function(){return v},set:function(t){v=t}},i.urlPrefix={get:function(){if(o&&n){if(n instanceof Object&&n.getter)return n.getter();if(n)return n}return null},set:function(t){o&&(n=t)}},i.getCompleteResourceUrl={get:function(){return a()}},i.getCompleteFiltersUrl={get:function(t,n,e,o){return o||(o=[]),q(i.getPagFilters(t,n,e).concat(o))}},i.getMembersResource={get:function(){return R.getResourceProperties(h).filter(function(t){return!t.notDisplay})}},i.getKeyProperty={get:function(){return y}},i.getOpProperty={get:function(){return x}},i.getCollection=function(e,t,n,o){l=!0,t=t||b;var r=null;o&&(r=o instanceof Function?o():o.skip+"/"+o.take),u(w(function(t){l=!0;var n=t.data.data||[];e(n),l=!1}),w(t),q(n),r)},i.getEnumerationBind=function(e,o,t,n){return i.getCollection(function(t){var n=[];t.forEach(function(t){n.push({Value:t[y],Display:t[e],ObjectData:t})}),o(n)},t,n)},i.getEnumerationBindMultiDisplay=function(r){return i.getCollection(function(t){var o=[];t.forEach(function(n){if(r.displayProperties){var e="";r.displayProperties.forEach(function(t){t.type?e+=n[t.property][t.display]+" - ":e+=n[t.property]+" - "}),e=e.substring(0,e.length-2),o.push({Value:n[y],Display:e,ObjectData:n})}}),r.actionSuccess(o)},r.actionError,r.filters)},i.getDefault=function(e,t){var n=R.getDefaultUrl(h);l=!0,t=t||b,u(w(function(t){l=!0;var n=t.data.data||[];e(n),l=!1}),w(t),null,n)},i.saveEntity=function(t,n,e){var o,r,i,c,u,s,a,l,p;t[y]?t[x]?(a=t,l=n,p=e,(1!=C||v)&&(C=!0,O(S.save),f(a,M(l,!1),M(p,!0)))):(c=t,u=n,s=e,(1!=C||v)&&(C=!0,O(S.save),g(c,M(u,!1),M(s,!0)))):(o=t,r=n,i=e,(1!=C||v)&&(C=!0,O(S.save),m(o,M(r,!1),M(i,!0))))},i.deleteEntity=function(t,n,e){var o,r,i,c=t;t instanceof Object&&(c=t[y]),o=c,r=n,i=e,(1!=p||d)&&(p=!0,O(S.delete),s(o,B(r,!1),B(i,!0)))},i.loadAsResource=function(t,n,e){var o=t;t instanceof Object&&(o=t[y]),P(o,n,e)},i.getEntityPagination=function(t,n,e,o,r){l=!0;var i=+t+"/"+n,c=[];return e&&(e instanceof String&&(i=e+"/"+i),e instanceof Function&&(i=e()?e()+"/"+i:i),e instanceof Array&&0<e.length&&(c=c.concat(e))),o&&0<o.length&&(c=c.concat(o)),r&&0<r.length&&(c=c.concat(r)),u(null,null,q(c),i,!0).then(function(t){var n={resultSet:t.data.data,total:parseInt(t.data.results)};return l=!1,n},function(t){l=!1,E(t)})},i.getPagFilters=function(t,n,e){if(t&&(!n||n.length<=0)){var o=k(R.getPaginableProperties(h),e).map(function(t){return t.pageProperty?t.pageProperty:t.name}),r=k(R.getJoinProperties(h),e),i=[{property:"operator",value:"or"}];for(var c in o)i.push({property:o[c],value:"like;"+t});for(var c in r)i.push({property:r[c].propertySearch,value:t}),i.push({property:r[c].name,value:"join;"+r[c].propertyJoin})}else n&&(i=[{property:"operator",value:"and"}],n.forEach(function(t){"="==t.operator&&t.property.name&&i.push({property:t.property.pageProperty||t.property.name,value:"like;"+t.value}),"%"==t.operator&&t.property.name&&i.push({property:t.property.pageProperty||t.property.name,value:"like;%25"+t.value}),">"==t.operator&&t.property.name&&i.push({property:t.property.pageProperty||t.property.name,value:"gt;"+t.value}),">="==t.operator&&t.property.name&&i.push({property:t.property.pageProperty||t.property.name,value:"gte;"+t.value}),"<"==t.operator&&t.property.name&&i.push({property:t.property.pageProperty||t.property.name,value:"lt;"+t.value}),"<="==t.operator&&t.property.name&&i.push({property:t.property.pageProperty||t.property.name,value:"lte;"+t.value}),"<>"==t.operator&&t.property.name&&i.push({property:t.property.pageProperty||t.property.name,value:"neq;"+t.value})}));return i},i.getFile=function(t,c,u){V({method:"GET",url:t,responseType:"arraybuffer"}).then(function(t){var n,e,o,r,i;n=u,e=c||null,o=new Blob([t.data],{type:e}),r=(window.URL||window.webkitURL).createObjectURL(o),(i=document.createElement("a")).download=n||h,i.href=r,document.body.appendChild(i),i.click(),document.body.removeChild(i)},function(t){E(t)})},i.getId=function(t){if(t&&t instanceof Object&&t[y]){var n=t[y];return isNaN(n)?n:parseInt(n)}return null},i.isNewEntity=function(t){return null==i.getId(t)},i.isProcessedEntity=function(t){return R.isProcessedEntity(h,t)},i.getStartDateProperty=function(){return R.getStartDateProperty(h)},i.getEndDateProperty=function(){return R.getEndDateProperty(h)},i.getNotApplyProperty=function(){return R.getNotApplyProperty(h)},i.listenSave=function(t){F(t,S.save)},i.listenSaved=function(t){F(t,S.saved)},i.listenDelete=function(t){F(t,S.delete)},i.listenDeleted=function(t){F(t,S.deleted)},i.listenLoad=function(t){F(t,S.load)},i.listenLoaded=function(t){F(t,S.loaded)},i.listenErrorSave=function(t){F(t,S.errorSave)},i.listenErrorDelete=function(t){F(t,S.errorDelete)},i.listenErrorLoad=function(t){F(t,S.errorLoad)},i.listenNonValidSave=function(t){F(t,S.nonValidSave)},i.clearEvents=function(){t=[]}}}angular.module("entifix-js").factory("EntifixResource",t),t.$inject=["$http","AppResources","EntifixMetadata","EntifixErrorManager"]}(),function(){function t(c){var r,u,s=this,t=Math.floor(100*Math.random()+1);function n(t){for(var n="!@#$^&%*()+=-[]/{}|:<>?,.",e=0;e<n.length;e++)t=t.replace(new RegExp("\\"+n[e],"gi"),"");return t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/ /g,"")).replace(/á/gi,"a")).replace(/é/gi,"e")).replace(/í/gi,"i")).replace(/ó/gi,"o")).replace(/ú/gi,"u")).replace(/ñ/gi,"n")}function a(t,n){s.valueModel!=t&&(s.valueModel=t,s.onChange&&s.onChange({oldValue:s.valueModel,newValue:t,entity:n}))}function e(n){var t=s.maxItemsQuery.get();s.queryDetails.resource.getCollection(function(t){s.entityList=t,s.showList=t.map(s.mappingMethod.get()),n.resolve(s.showList),s.title.set(r)},function(t){n.reject&&n.reject()},s.getConstantFilters(),{skip:0,take:t})}function o(t){s.loadingFirstRequest=!0,s.queryDetails.resource.getCollection(function(t){0<t.length&&(s.entityList=t,s.showList=t.map(s.mappingMethod.get()),s.selectedItem=s.showList[0],s.firstRequest=!1)},function(t){},[{property:s.keyProperty.get(),value:t}])}function l(){u&&(c.cancel(u),u=null)}s.isLoading={get:function(){return s.queryDetails&&s.queryDetails.resource&&s.queryDetails.resource.isLoading.get(),!1}},s.canShowEditableFields={get:function(){return!!s.showEditableFields&&s.showEditableFields()}},s.canEvaluateErrors={get:function(){return!!s.evaluateErrors&&s.evaluateErrors({name:s.name.get()})}},s.isRequired={get:function(){return!(!s.componentConstruction||!s.componentConstruction.isRequired)&&s.componentConstruction.isRequired}},s.requiredMessage={get:function(){if(s.componentConstruction&&s.componentConstruction.requiredMessage){if(s.componentConstruction.requiredMessage.getter)return s.componentConstruction.requiredMessage.getter();if(s.componentConstruction.requiredMessage.text)return s.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},s.requiredMatch={get:function(){return!(!s.componentConstruction||!s.componentConstruction.requiredMatch)&&s.componentConstruction.requiredMatch}},s.requiredMatchMessage={get:function(){if(s.componentConstruction&&s.componentConstruction.requiredMatchMessage){if(s.componentConstruction.requiredMatchMessage.getter)return s.componentConstruction.requiredMatchMessage.getter();if(s.componentConstruction.requiredMatchMessage.text)return s.componentConstruction.requiredMatchMessage.text}return"Seleccione un elemento de la lista"}},s.minLengthRequest={get:function(){return s.componentConstruction&&s.componentConstruction.minLengthRequest?s.componentConstruction.minLengthRequest:0}},s.minLength={get:function(){return s.componentConstruction&&s.componentConstruction.minLength?s.componentConstruction.minLength:null}},s.minLengthMessage={get:function(){if(s.componentConstruction&&s.componentConstruction.minLengthMessage){if(s.componentConstruction.minLengthMessage.getter)return s.componentConstruction.minLengthMessage.getter();if(s.componentConstruction.minLengthMessage.text)return s.componentConstruction.minLengthMessage.text}return"El texto es demasiado corto"}},s.maxLength={get:function(){return s.componentConstruction&&s.componentConstruction.maxLength?s.componentConstruction.maxLength:null}},s.maxLengthMessage={get:function(){if(s.componentConstruction&&s.componentConstruction.maxLengthMessage){if(s.componentConstruction.maxLengthMessage.getter)return s.componentConstruction.maxLengthMessage.getter();if(s.componentConstruction.maxLengthMessage.text)return s.componentConstruction.maxLengthMessage.text}return"El texto es demasiado largo"}},s.createNewEntityMessage={get:function(){if(s.componentConstruction&&s.componentConstruction.createNewEntityMessage){if(s.componentConstruction.createNewEntityMessage.getter)return s.componentConstruction.createNewEntityMessage.getter();if(s.componentConstruction.createNewEntityMessage.text)return s.componentConstruction.createNewEntityMessage.text}return"Agregar "}},s.title={get:function(){if(s.componentConstruction&&s.componentConstruction.title){if(s.componentConstruction.title.getter)return s.componentConstruction.title.getter();if(s.componentConstruction.title.text)return s.componentConstruction.title.text}return""},set:function(t){t&&(s.componentConstruction.title={text:t})}},s.name={get:function(){return""!=n(s.title.get())?n(s.title.get()):"entifixautocomplete"+t}},s.mappingMethod={get:function(){if(s.componentConstruction&&s.componentConstruction.mapping){if(s.componentConstruction.mapping.method)return s.componentConstruction.mapping.method;if(s.componentConstruction.mapping.property)return function(t){return t[s.componentConstruction.mapping.property]}}}},s.isForm={get:function(){return!s.componentConstruction||null==s.componentConstruction.isForm||s.componentConstruction.isForm}},s.placeholder={get:function(){if(s.componentConstruction&&s.componentConstruction.placeholder){if(s.componentConstruction.placeholder.getter)return s.componentConstruction.placeholder.getter();if(s.componentConstruction.placeholder.text)return s.componentConstruction.placeholder.text}return""}},s.disabled={get:function(){return!(!s.componentConstruction||!s.componentConstruction.disabled)&&s.componentConstruction.disabled}},s.floating={get:function(){return!s.componentConstruction||null==s.componentConstruction.floating||s.componentConstruction.floating}},s.loadAllItems={get:function(){return!(!s.componentConstruction||!s.componentConstruction.loadAllItems)&&s.componentConstruction.loadAllItems}},s.noCache={get:function(){return!s.componentConstruction||null==s.componentConstruction.noCache||s.componentConstruction.noCache}},s.notFoundText={get:function(){if(s.componentConstruction&&s.componentConstruction.notFoundText){if(s.componentConstruction.notFoundText.getter)return s.componentConstruction.notFoundText.getter();if(s.componentConstruction.notFoundText.text)return s.componentConstruction.notFoundText.text}return"No hay coincidencias. "}},s.tooltip={get:function(){if(s.componentConstruction&&s.componentConstruction.tooltip){if(s.componentConstruction.tooltip.getter)return s.componentConstruction.tooltip.getter();if(s.componentConstruction.tooltip.text)return s.componentConstruction.tooltip.text}return null}},s.canCreateNewEntity={get:function(){return!(!s.componentConstruction||!s.componentConstruction.canCreateNewEntity)&&s.componentConstruction.canCreateNewEntity}},s.maxItemsQuery={get:function(){return s.componentConstruction&&s.componentConstruction.maxItemsQuery?s.componentConstruction.maxItemsQuery:10}},s.keyProperty={get:function(){return s.componentConstruction&&s.componentConstruction.keyProperty?s.componentConstruction.keyProperty:s.queryDetails&&s.queryDetails.resource?s.queryDetails.resource.getKeyProperty.get():"id"}},s.nullValueLabel={get:function(){return s.componentConstruction&&s.componentConstruction.nullValueLabel?s.componentConstruction.nullValueLabel:"SIN REGISTROS"}},s.getConstantFilters=function(){var t=null;return s.queryDetails&&s.queryDetails.constantFilters&&(t=s.queryDetails.constantFilters.getter?s.queryDetails.constantFilters.getter():s.queryDetails.constantFilters),t},s.$onInit=function(){s.loadAllItems.get()&&s.queryDetails.resource.getCollection(function(t){s.items=t}),function(){s.componentBindingOut={selectedEntity:{get:function(){if(s.entityList&&0<s.entityList.length)return s.entityList.filter(function(t){return s.selectedItem==s.mappingMethod.get()(t)})[0]},set:function(t){t?o(t):(s.showList=[],s.selectedItem=void 0,s.entityList=[])}}},s.componentConstruction.init&&s.componentConstruction.init();s.loadingFirstRequest=!1}(),r=s.title.get()},s.getDisplayValue=function(){return s.valueModel&&s.selectedItem?s.selectedItem:(!s.valueModel||s.selectedItem||s.loadingFirstRequest||o(s.valueModel),s.nullValueLabel.get())},s.getValue=function(){return s.valueModel?s.valueModel:null},s.updateData=function(n){var e,t,o=n.search;s.queryDetails.resource.getCollection(function(t){0<t.length?(s.entityList=t,s.showList=t.map(s.mappingMethod.get()),s.title.set(r)):(s.showList=[],s.canCreateNewEntity.get()&&(s.showList=[o],s.title.set(r+": "+s.createNewEntityMessage.get()+o))),n.resolve(s.showList)},function(t){n.reject&&n.reject()},(e=o,t=[],s.queryDetails.operator&&"or"!=s.queryDetails.operator||t.push({property:"operator",value:"or"}),s.queryDetails&&s.componentConstruction.searchProperties&&0<s.componentConstruction.searchProperties.length&&(t=t.concat(s.componentConstruction.searchProperties.map(function(t){return{property:t,value:"like;"+e}}))),s.queryDetails&&s.queryDetails.filters&&(t=t.concat(s.queryDetails.filters)),s.getConstantFilters()&&(t=t.concat(s.getConstantFilters())),t))},s.searchItems=function(i){return i&&s.loadAllItems.get()?s.items.filter(function(t){return 0<=t[s.componentConstruction.searchProperties[0]].indexOf(i)}):i?new Promise(function(t,n){var e,o,r;a(null),l(),e=t,o=n,r=i,u=c(s.updateData,500,!0,{search:r,resolve:e,reject:o})}):new Promise(function(t,n){a(null),l(),u=c(e,500,!0,{search:i,resolve:t,reject:n})})},s.changeSelectedItem=function(){var t=s.entityList.filter(function(t){return s.selectedItem==s.mappingMethod.get()(t)})[0];s.canCreateNewEntity.get()?(s.onChange&&s.onChange({oldValue:null,newValue:s.selectedItem,entity:t}),t&&s.selectedItem&&a(s.queryDetails.resource.getId(t),t)):s.selectedItem?a(s.queryDetails.resource.getId(t),t):a(null)},s.onFocus=function(t){t.target&&t.target.value&&0<t.target.value.length&&"click"==t.type&&t.target.select()}}t.$inject=["$timeout"];var n={bindings:{valueModel:"=",showEditableFields:"&",evaluateErrors:"&",queryDetails:"<",componentConstruction:"<",componentBindingOut:"=",onChange:"&"},templateUrl:"dist/shared/components/entifixAutocomplete/entifixAutocomplete.html",controller:t,controllerAs:"vm"};angular.module("entifix-js").component("entifixAutocomplete",n)}(),function(){function t(n,e,r,o,i,t){var l=this;function c(){if(l.componentConstruction.reload=l.reload,p("search")&&(l.tableComponentConstruction.search||(l.tableComponentConstruction.search={})),p("edit")){l.tableComponentConstruction.edit||(l.tableComponentConstruction.edit={});var n=l.tableComponentConstruction.edit.customAction;l.tableComponentConstruction.edit.customAction=function(t){n?n(t):l.entityQueryDetails.resource.loadAsResource(t.id,function(t){l.isModal.get()?l.openModal(t):l.changeToSingleView(t)})}}if(p("add")){l.tableComponentConstruction.add||(l.tableComponentConstruction.add={});var t=l.tableComponentConstruction.add.customAction;l.tableComponentConstruction.add.customAction=function(){t?t():l.isModal.get()?l.openModal():l.changeToSingleView()}}if(p("remove")){l.tableComponentConstruction.remove||(l.tableComponentConstruction.remove={});var e=l.tableComponentConstruction.remove.customAction;e&&(l.tableComponentConstruction.remove.customAction=function(t){e(t)})}if(l.isProcessEntity.get()&&p("process")){l.tableComponentConstruction.process||(l.tableComponentConstruction.process={});var o=l.tableComponentConstruction.process.customAction;o&&(l.tableComponentConstruction.process.customAction=function(t){o(t)})}if(l.tableQueryDetails||(l.tableQueryDetails=l.queryDetails),l.entityQueryDetails||(l.entityQueryDetails=l.queryDetails),!l.isModal.get()){if(m("cancel")){l.entityComponentConstruction.cancel||(l.entityComponentConstruction.cancel={});var r=l.entityComponentConstruction.cancel.customAction;l.entityComponentConstruction.cancel.customAction=function(){r?r():l.entityQueryDetails.resource.isNewEntity(l.entityComponentBindingOut.entity.get())?l.changeToMainView():g()}}if(m("ok")){l.entityComponentConstruction.ok||(l.entityComponentConstruction.ok={});var i=l.entityComponentConstruction.ok.customAction;l.entityComponentConstruction.ok.customAction=function(){i?i():l.changeToMainView()}}if(m("edit")){l.entityComponentConstruction.edit||(l.entityComponentConstruction.edit={});var c=l.entityComponentConstruction.edit.customAction;c&&(l.entityComponentConstruction.edit.customAction=function(t){c(t)})}if(m("save")){l.entityComponentConstruction.save||(l.entityComponentConstruction.save={}),l.entityComponentConstruction.save.autoChange=!1;var u=l.entityComponentConstruction.save.customAction;u&&(l.entityComponentConstruction.save.customAction=function(t){u(t)})}if(m("remove")){l.entityComponentConstruction.remove||(l.entityComponentConstruction.remove={});var s=l.entityComponentConstruction.remove.customAction;s&&(l.entityComponentConstruction.remove.customAction=function(t){s(t)})}if(l.isProcessEntity.get()){l.entityComponentConstruction.process||(l.entityComponentConstruction.process={});var a=l.entityComponentConstruction.process.customAction;l.entityComponentConstruction.process.customAction=function(t,n){if(a)a(t,n);else{var e={};e[l.entityQueryDetails.resource.getKeyProperty.get()]=t[l.entityQueryDetails.resource.getKeyProperty.get()],e[l.entityQueryDetails.resource.getOpProperty.get()]="PROCESAR",f(e,null,n)}}}l.tableComponentConstruction.blockTableOnChangeView=!0,l.entityComponentConstruction.canViewHistory=l.canViewHistory,l.entityQueryDetails.resource.listenSaved(function(t){0==l.entityComponentConstruction.save.autoChange?l.changeToSingleView(t.fullResponse.data.data[0]):l.changeToMainView()}),l.entityQueryDetails.resource.listenDeleted(function(){0!=l.entityComponentConstruction.remove.autoChange&&l.changeToMainView()})}}function p(n){return null==l.tableComponentConstruction.useDefaults||1==l.tableComponentConstruction.useDefaults||(l.tableComponentConstruction.defaultValuesAllowed&&0<l.tableComponentConstruction.defaultValuesAllowed.length?0<l.tableComponentConstruction.defaultValuesAllowed.filter(function(t){return t==n}).length:void 0)}function m(n){return null==l.entityComponentConstruction.useDefaults||1==l.entityComponentConstruction.useDefaults||(l.entityComponentConstruction.defaultValuesAllowed&&0<l.entityComponentConstruction.defaultValuesAllowed.length?0<l.entityComponentConstruction.defaultValuesAllowed.filter(function(t){return t==n}).length:void 0)}function g(){l.entityQueryDetails.resource.loadAsResource(n[l.paramName.get()],function(t){l.entityComponentBindingOut.entity.set(t)}),l.entityComponentBindingOut.showEditableFields.set(!1)}l.$onInit=function(){c(),function(){if(!l.isModal.get())if(n[l.paramName.get()]){s=u.singleView;!function t(){l.entityComponentBindingOut?0<n[l.paramName.get()]?g():(l.entityComponentBindingOut.entity.set({}),l.entityComponentBindingOut.showEditableFields.set(!0)):(console.log("Ciclo de inicializacion del formulario"),r(t,100))}()}else s=u.mainView}()};var u={mainView:1,singleView:2},s=u.mainView;l.onMainView={get:function(){return s==u.mainView}},l.onSingleView={get:function(){return s==u.singleView}},l.title={get:function(){if(l.componentConstruction&&l.componentConstruction.title){if(l.componentConstruction.title.getter)return l.componentConstruction.title.getter(s);if(l.componentConstruction.title.text)return l.componentConstruction.title.text}return"Catálogo"}},l.icon={get:function(){return l.componentConstruction&&l.componentConstruction.icon?l.componentConstruction.icon.getter?l.componentConstruction.icon.getter(s):l.componentConstruction.icon:""}},l.paramName={get:function(){return l.componentConstruction&&l.componentConstruction.paramName?l.componentConstruction.paramName:"id"}},l.useMainTab={get:function(){return!l.componentConstruction||null==l.componentConstruction.useMainTab||l.componentConstruction.useMainTab}},l.showBar={get:function(){return!l.componentConstruction||!l.componentConstruction.showBar||(l.componentConstruction.showBar.getter?l.componentConstruction.showBar.getter(s):l.componentConstruction.showBar)}},l.isModal={get:function(){return!(!l.componentConstruction||null==l.componentConstruction.isModal)&&l.componentConstruction.isModal}},l.closeWhenSaving={get:function(){return!l.entityComponentConstruction||null==l.entityComponentConstruction.closeWhenSaving||l.entityComponentConstruction.closeWhenSaving}},l.isProcessEntity={get:function(){return!(!l.componentConstruction||null==l.componentConstruction.isProcessEntity)&&l.componentConstruction.isProcessEntity}},l.noFilterTooltip={get:function(){return l.componentConstruction&&null!=l.componentConstruction.noFilterTooltip?l.componentConstruction.noFilterTooltip:"Quitar todos los filtros"}},l.showNoFilter={get:function(t){return l.componentConstruction&&null!=l.componentConstruction.showNoFilter?l.componentConstruction.showNoFilter:!!t||!n[l.paramName.get()]}};var a=!0;function f(t,e,o){l.entityQueryDetails.resource.saveEntity(t,function(t,n){n&&(e&&l.closeWhenSaving.get()?e():t&&t.data.data[0]&&o(!0,t.data.data[0]),l.tableComponentBindingOut&&l.tableComponentBindingOut.pager&&r(l.tableComponentBindingOut.pager.reload(),500))})}l.canViewHistory={get:function(){return!!a&&!!n[l.paramName.get()]},set:function(t){a=t}},l.historyTooltip={get:function(){return l.componentConstruction&&l.componentConstruction.historyTooltip?l.componentConstruction.historyTooltip:"Mostrar Bitácora"}},l.history={get:function(){return t.showHistory},set:function(){t.showHistory=!t.showHistory}},l.reload={invoke:function(){c()}},l.changeToMainView=function(){e.go(e.current.name,_defineProperty({},l.paramName.get(),null))},l.changeToSingleView=function(t){var n=-1;t&&(n=l.entityQueryDetails.resource.getId(t)),(l.onSingleView.get()||l.tableComponentBindingOut.allowedActions.canEdit.get()&&0<n||l.tableComponentBindingOut.allowedActions.canAdd.get()&&-1==n)&&e.go(e.current.name,_defineProperty({},l.paramName.get(),n))},l.openModal=function(t,n){l.entityComponentConstruction||(l.entityComponentConstruction={}),m("cancel")&&(l.entityComponentConstruction.cancel||(l.entityComponentConstruction.cancel={})),m("edit")&&(l.entityComponentConstruction.edit||(l.entityComponentConstruction.edit={})),m("ok")&&(l.entityComponentConstruction.ok||(l.entityComponentConstruction.ok={})),m("save")&&(l.entityComponentConstruction.save||(l.entityComponentConstruction.save={}),l.entityComponentConstruction.save.customAction=function(t,n,e){f(t,n,e)}),m("remove")&&(l.entityComponentConstruction.remove||(l.entityComponentConstruction.remove={}),l.entityComponentConstruction.remove.customAction=function(t,n,e){i.confirm("Está seguro de eliminar el registro","Confirmación requerida",function(){l.entityQueryDetails.resource.deleteEntity(t,function(){n(),r(l.tableComponentBindingOut.pager.reload(),500)})})}),l.entityComponentConstruction.event=n,l.isProcessEntity.get()&&(l.entityComponentConstruction.process||(l.entityComponentConstruction.process={}),l.entityComponentConstruction.process.customAction=function(t,n,e){t[l.entityQueryDetails.resource.getOpProperty.get()]="PROCESAR",f(t,n,e)}),l.entityQueryDetails||(l.entityQueryDetails=l.queryDetails),l.entityComponentBindingOut||(l.entityComponentBindingOut={}),l.entityComponentBindingOut.object=t,l.entityComponentBehavior||(l.entityComponentBehavior={}),l.modal=new o(l.entityComponentConstruction,l.entityComponentBehavior,l.entityComponentBindingOut,l.entityQueryDetails),l.modal.openModal()}}t.$inject=["$stateParams","$state","$timeout","EntifixEntityModal","EntifixNotification","$rootScope"];var n={templateUrl:"dist/shared/components/entifixCatalog/entifixCatalog.html",controller:t,controllerAs:"bindCtrl",bindings:{componentConstruction:"<",queryDetails:"<",tableComponentConstruction:"<",tableComponentBehavior:"<",tableComponentBindingOut:"=",tableQueryDetails:"=",entityComponentConstruction:"<",entityComponentBehavior:"<",entityComponentBindingOut:"=",entityQueryDetails:"="}};angular.module("entifix-js").component("entifixCatalog",n)}(),function(){function t(){var n=this,t=Math.floor(100*Math.random()+1);function e(t){for(var n="!@#$^&%*()+=-[]/{}|:<>?,.",e=0;e<n.length;e++)t=t.replace(new RegExp("\\"+n[e],"gi"),"");return t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/ /g,"")).replace(/á/gi,"a")).replace(/é/gi,"e")).replace(/í/gi,"i")).replace(/ó/gi,"o")).replace(/ú/gi,"u")).replace(/ñ/gi,"n")}n.canShowEditableFields={get:function(){return!!n.showEditableFields&&n.showEditableFields()}},n.canEvaluateErrors={get:function(){return!!n.evaluateErrors&&n.evaluateErrors({name:n.name.get()})}},n.isSwitch={get:function(){return!!n.componentConstruction.isSwitch&&n.componentConstruction.isSwitch}},n.title={get:function(){if(n.componentConstruction&&n.componentConstruction.title){if(n.componentConstruction.title.getter)return n.componentConstruction.title.getter();if(n.componentConstruction.title.text)return n.componentConstruction.title.text}return""}},n.name={get:function(){return""!=e(n.title.get())?e(n.title.get()):"entifixcheckboxswitch"+t}},n.isForm={get:function(){return null==n.componentConstruction.isForm||n.componentConstruction.isForm}},n.tooltip={get:function(){if(n.componentConstruction&&n.componentConstruction.tooltip){if(n.componentConstruction.tooltip.getter)return n.componentConstruction.tooltip.getter();if(n.componentConstruction.tooltip.text)return n.componentConstruction.tooltip.text}return null}},n.valueTitle={get:function(){if(n.title.get()&&""!=n.title.get()){if(n.includeValue.get()){var t="No";return n.valueModel&&n.title.get()&&""!=n.title.get()&&(t="Si"),n.title.get()+": "+t}return n.title.get()}return""}},n.includeValue={get:function(){return null==n.componentConstruction.includeValue||n.componentConstruction.includeValue}},n.getValue=function(){return n.valueModel?"Si":"No"},n.$onInit=function(){n.init&&n.init()},n.runOnChangeTrigger=function(){n.onChange&&n.onChange({value:n.valueModel})}}t.$inject=[];var n={bindings:{valueModel:"=",showEditableFields:"&",evaluateErrors:"&",componentConstruction:"<",onChange:"&"},templateUrl:"dist/shared/components/entifixCheckboxSwitch/entifixCheckboxSwitch.html",controller:t,controllerAs:"vm"};angular.module("entifix-js").component("entifixCheckboxSwitch",n)}(),function(){function t(t){var e=this,n=Math.floor(100*Math.random()+1);e.separatorsDefault=[t.KEY_CODE.COMMA,t.KEY_CODE.ENTER],e.canShowEditableFields={get:function(){return!!e.showEditableFields&&e.showEditableFields()}},e.canEvaluateErrors={get:function(){return!!e.evaluateErrors&&e.evaluateErrors({name:e.name.get()})}},e.maxChips={get:function(){return e.componentConstruction&&e.componentConstruction.maxChips?e.componentConstruction.maxChips:null}},e.maxChipsMessage={get:function(){if(e.componentConstruction&&e.componentConstruction.maxChipsMessage){if(e.componentConstruction.maxChipsMessage.getter)return e.componentConstruction.maxChipsMessage.getter();if(e.componentConstruction.maxChipsMessage.text)return e.componentConstruction.maxChipsMessage.text}return"Ha alcanzado el número máximo de elementos"}},e.name={get:function(){return"entifixchip"+n}},e.transformChip={get:function(){return e.componentConstruction&&e.componentConstruction.transformChip?e.componentConstruction.transformChip:null},invoke:function(t,n){e.componentConstruction&&e.componentConstruction.transformChip&&e.componentConstruction.transformChip(t,n)}},e.onAdd={get:function(){return e.componentConstruction&&e.componentConstruction.onAdd?e.componentConstruction.onAdd:null},invoke:function(t,n){e.componentConstruction&&e.componentConstruction.onAdd&&e.componentConstruction.onAdd(t,n)}},e.onRemove={get:function(){return e.componentConstruction&&e.componentConstruction.onRemove?e.componentConstruction.onRemove:null},invoke:function(t,n){e.componentConstruction&&e.componentConstruction.onRemove&&e.componentConstruction.onRemove(t,n)}},e.onSelect={get:function(){return e.componentConstruction&&e.componentConstruction.onSelect?e.componentConstruction.onSelect:null},invoke:function(t,n){e.componentConstruction&&e.componentConstruction.onSelect&&e.componentConstruction.onSelect(t,n)}},e.placeholder={get:function(){return e.componentConstruction&&e.componentConstruction.placeholder?e.componentConstruction.placeholder:""}},e.secondaryPlaceholder={get:function(){return e.componentConstruction&&e.componentConstruction.secondaryPlaceholder?e.componentConstruction.secondaryPlaceholder:e.placeholder.get()}},e.isForm={get:function(){return!e.componentConstruction||null==e.componentConstruction.isForm||e.componentConstruction.isForm}},e.removable={get:function(){return!e.componentConstruction||null==e.componentConstruction.removable||e.componentConstruction.removable}},e.readOnly={get:function(){return!(!e.componentConstruction||!e.componentConstruction.readOnly)&&e.componentConstruction.readOnly}},e.enableChipEdit={get:function(){return e.componentConstruction&&null!=e.componentConstruction.enableChipEdit?e.componentConstruction.enableChipEdit:"true"}},e.addOnBlur={get:function(){return!e.componentConstruction||null==e.componentConstruction.addOnBlur||e.componentConstruction.addOnBlur}},e.separators={get:function(){return e.componentConstruction&&e.componentConstruction.separators?e.componentConstruction.separators:e.separatorsDefault}},e.tooltip={get:function(){if(e.componentConstruction&&e.componentConstruction.tooltip){if(e.componentConstruction.tooltip.getter)return e.componentConstruction.tooltip.getter();if(e.componentConstruction.tooltip.text)return e.componentConstruction.tooltip.text}return null}},e.$onInit=function(){e.init&&e.init()},e.getStringValue=function(){if(Array.isArray(e.valueModel)&&0<e.valueModel.length){var n="";return e.valueModel.forEach(function(t){n+=t+" "}),n}return""},e.tC=function(t,n){e.transformChip.get()&&e.transformChip.invoke(t,n)},e.oAdd=function(t,n){e.onAdd.get()&&e.onAdd.invoke(t,n)},e.oRemove=function(t,n){e.onRemove.get()&&e.onRemove.invoke(t,n)},e.oSelect=function(t,n){e.onSelect.get()&&e.onSelect.invoke(t,n)}}t.$inject=["$mdConstant"];var n={bindings:{valueModel:"=",showEditableFields:"&",evaluateErrors:"&",componentConstruction:"<",onChange:"&"},templateUrl:"dist/shared/components/entifixChip/entifixChip.html",controller:t,controllerAs:"vm"};angular.module("entifix-js").component("entifixChip",n)}(),function(){var t=angular.module("entifix-js");function n(n,t,e,o,r,i,c,u){var s=this,a={edit:1,view:2},l=a.view;function p(){var t=n.CreateStringHtmlComponentAndBindings(s.componentConstruction,"bindCtrl.connectionComponent.objectBindings");s.stringhtmlcomponent=t.stringhtml,s.connectionComponent.objectBindings=t.objectbindings}function m(){s.queryDetails.resource.saveEntity(s.connectionComponent.entity,function(t,n){n&&(l=a.view),t&&t.data.data[0]&&s.entity.set(t.data.data[0])})}function g(t,n){l=t?a.view:a.edit,s.entity.set(n)}s.entity={get:function(){return s.connectionComponent?s.connectionComponent.entity:null},set:function(t){if(s.connectionComponent){var n=s.connectionComponent.entity;s.connectionComponent.entity=t,s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onChangeEntity&&s.componentBehavior.events.onChangeEntity(n,t)}}},s.isLoading={get:function(){return!(!s.queryDetails||!s.queryDetails.resource)&&s.queryDetails.resource.isLoading.get()}},s.isSaving={get:function(){return!(!s.queryDetails||!s.queryDetails.resource)&&s.queryDetails.resource.isSaving.get()}},s.isDeleting={get:function(){return!(!s.queryDetails||!s.queryDetails.resource)&&s.queryDetails.resource.isDeleting.get()}},s.onTask={get:function(){return s.isLoading.get()||s.isSaving.get()||s.isDeleting.get()}},s.title={get:function(){if(s.componentConstruction&&s.componentConstruction.title){if(s.componentConstruction.title.getter)return s.componentConstruction.title.getter(s.entity.get());if(s.componentConstruction.title.text)return s.componentConstruction.title.text}return"Detalle"}},s.icon={get:function(){return s.componentConstruction&&s.componentConstruction.title&&s.componentConstruction.title.icon?s.componentConstruction.title.icon:"menu"}},s.canCancel={get:function(){return!(!s.componentConstruction||!s.componentConstruction.cancel||l!=a.edit)}},s.cancelIcon={get:function(){return s.componentConstruction&&s.componentConstruction.cancel&&s.componentConstruction.cancel.icon?s.componentConstruction.cancel.icon:"clear"}},s.cancelText={get:function(){return s.componentConstruction&&s.componentConstruction.cancel&&s.componentConstruction.cancel.text?""+s.componentConstruction.cancel.text:"Cancelar"}},s.canOk={get:function(){return!(!s.componentConstruction||!s.componentConstruction.ok||l!=a.view)}},s.okIcon={get:function(){return s.componentConstruction&&s.componentConstruction.ok&&s.componentConstruction.ok.icon?s.componentConstruction.ok.icon:"done"}},s.okText={get:function(){return s.componentConstruction&&s.componentConstruction.ok&&s.componentConstruction.ok.text?""+s.componentConstruction.ok.text:"Aceptar"}},s.canEdit={get:function(){return!(!(s.componentConstruction&&s.componentConstruction.edit&&s.queryDetails&&s.queryDetails.resource&&s.entity.get())||s.queryDetails.resource.isNewEntity(s.entity.get())||l!=a.view)}},s.editIcon={get:function(){return s.componentConstruction&&s.componentConstruction.edit&&s.componentConstruction.edit.icon?s.componentConstruction.edit.icon:"create"}},s.editText={get:function(){if(s.componentConstruction&&s.componentConstruction.edit){if(s.componentConstruction.edit.text instanceof Object&&s.componentConstruction.edit.text.getter)return s.componentConstruction.edit.text.getter();if(s.componentConstruction.edit.text instanceof String)return s.componentConstruction.edit.text}return"Editar"}},s.canSave={get:function(){return!(!s.componentConstruction||!s.componentConstruction.save||l!=a.edit)}},s.saveIcon={get:function(){return s.componentConstruction&&s.componentConstruction.save&&s.componentConstruction.save.icon?""+s.componentConstruction.save.icon:"save"}},s.saveText={get:function(){return s.componentConstruction&&s.componentConstruction.save&&s.componentConstruction.save.text?""+s.componentConstruction.save.text:"Guardar"}},s.canRemove={get:function(){return!(!(s.componentConstruction&&s.componentConstruction.remove&&s.queryDetails&&s.queryDetails.resource&&s.entity.get())||s.queryDetails.resource.isNewEntity(s.entity.get())||l!=a.edit)}},s.removeIcon={get:function(){return s.componentConstruction&&s.componentConstruction.remove&&s.componentConstruction.remove.icon?s.componentConstruction.remove.icon:"delete"}},s.removeText={get:function(){return s.componentConstruction&&s.componentConstruction.remove&&s.componentConstruction.remove.text?""+s.componentConstruction.remove.text:"Eliminar"}},s.canProcess={get:function(){return!(!(s.componentConstruction&&s.componentConstruction.process&&l==a.view&&s.queryDetails&&s.queryDetails.resource&&s.entity.get())||s.queryDetails.resource.isNewEntity(s.entity.get())||s.queryDetails.resource.isProcessedEntity(s.entity.get()))}},s.processIcon={get:function(){return s.componentConstruction&&s.componentConstruction.process&&s.componentConstruction.process.icon?s.componentConstruction.process.icon:"done_all"}},s.processText={get:function(){return s.componentConstruction&&s.componentConstruction.process&&s.componentConstruction.process.text?""+s.componentConstruction.process.text:"Procesar"}},s.allowActions={get:function(){return!s.componentConstruction||null==s.componentConstruction.allowActions||s.componentConstruction.allowActions}},s.saveTooltip={get:function(){return s.componentConstruction&&s.componentConstruction.saveTooltip?s.componentConstruction.saveTooltip:"Todos los campos obligatorios deben estar correctos"}},s.canViewHistory={get:function(){return s.componentConstruction.canViewHistory.get()},set:function(t){s.componentConstruction.canViewHistory.set(t)}},s.history={get:function(){return u.showHistory}},s.$onInit=function(){new r(s.queryDetails.resource),s.connectionComponent={},s.connectionComponent.showEditableFields={get:function(){return l==a.edit},set:function(t){1==t&&(l=a.edit),0==t&&(l=a.view)}},s.connectionComponent.isSaving=s.isSaving,s.connectionComponent.history=s.history,s.connectionComponent.canViewHistory=s.canViewHistory,s.connectionComponent.canCancel={get:function(){return s.canCancel.get()}},s.connectionComponent.canRemove={get:function(){return s.canRemove.get()}},s.connectionComponent.canSave={get:function(){return s.canSave.get()}},s.connectionComponent.canEdit={get:function(){return s.canEdit.get()}},s.connectionComponent.canOk={get:function(){return s.canOk.get()}},s.connectionComponent.canProcess={get:function(){return s.canProcess.get()}},s.connectionComponent.cancelText={get:function(){return s.cancelText.get()}},s.connectionComponent.removeText={get:function(){return s.removeText.get()}},s.connectionComponent.saveText={get:function(){return s.saveText.get()}},s.connectionComponent.editText={get:function(){return s.editText.get()}},s.connectionComponent.okText={get:function(){return s.okText.get()}},s.connectionComponent.processText={get:function(){return s.processText.get()}},s.connectionComponent.cancelIcon={get:function(){return s.cancelIcon.get()}},s.connectionComponent.removeIcon={get:function(){return s.removeIcon.get()}},s.connectionComponent.saveIcon={get:function(){return s.saveIcon.get()}},s.connectionComponent.editIcon={get:function(){return s.editIcon.get()}},s.connectionComponent.okIcon={get:function(){return s.okIcon.get()}},s.connectionComponent.processIcon={get:function(){return s.processIcon.get()}},s.connectionComponent.cancel={invoke:function(){s.cancel()}},s.connectionComponent.remove={invoke:function(){s.remove()}},s.connectionComponent.edit={invoke:function(){s.edit()}},s.connectionComponent.ok={invoke:function(){s.ok()}},s.connectionComponent.save={invoke:function(){s.save()}},s.connectionComponent.process={invoke:function(){s.process()}},s.connectionComponent.onTask={get:function(){return s.onTask.get()}},s.connectionComponent.saveTooltip={get:function(){return s.saveTooltip.get()}},s.connectionComponent.entityForm={valid:function(){return s.entityForm.$valid}},s.connectionComponent.evaluateErrors={get:function(t){return function(n){var e={};for(var o in s.entityForm.$error){var t=s.entityForm.$error[o];t instanceof Array&&t.forEach(function(t){t.$name==n&&(e[o]=!0)})}return e}(t)}},function t(){s.entityForm?s.connectionComponent.entityForm=s.entityForm:c(t,200)}(),s.componentConstruction&&p(),s.componentBindingOut={showEditableFields:s.connectionComponent.showEditableFields,entity:s.entity,recreateDynamicComponent:p},s.componentBehavior&&s.componentBehavior.afterConstruction&&s.componentBehavior.afterConstruction()},s.ok=function(){s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onOk&&s.componentBehavior.events.onOk(),s.componentConstruction.ok.customAction&&s.componentConstruction.ok.customAction(),s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onAfterOk&&s.componentBehavior.events.onAfterOk()},s.cancel=function(){s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onCancel&&s.componentBehavior.events.onCancel(),s.componentConstruction.cancel.customAction?s.componentConstruction.cancel.customAction():l==a.edit&&(l=a.view,s.entity.get()&&s.queryDetails.resource.loadAsResource(s.entity.get(),function(t){s.entity.set(t)})),s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onCanceled&&s.componentBehavior.events.onCanceled()},s.edit=function(){s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onEdit&&s.componentBehavior.events.onEdit(),s.componentConstruction.edit.customAction?s.componentConstruction.edit.customAction():l=a.edit,s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onEdited&&s.componentBehavior.events.onEdited()},s.save=function(){s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onSave&&s.componentBehavior.events.onSave(s.entity.get()),s.componentConstruction.save.customAction?s.componentConstruction.save.customAction(s.entity.get(),g):m(),s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onSaved&&s.componentBehavior.events.onSaved()},s.remove=function(){s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onRemove&&s.componentBehavior.events.onRemove(),s.componentConstruction.remove.customAction?s.componentConstruction.remove.customAction(s.entity.get()):o.confirm("Está seguro de eliminar el registro","Confirmación requerida",function(){s.queryDetails.resource.deleteEntity(s.connectionComponent.entity,function(){l=a.view})}),s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onRemoved&&s.componentBehavior.events.onRemoved()},s.process=function(){s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onProcess&&s.componentBehavior.events.onProcess(),s.componentConstruction.process.customAction?s.componentConstruction.process.customAction(s.entity.get(),g):(s.connectionComponent.entity[s.queryDetails.resource.getOpProperty.get()]="PROCESAR",m()),s.componentBehavior&&s.componentBehavior.events&&s.componentBehavior.events.onProcessed&&s.componentBehavior.events.onProcessed()},s.submit=function(){s.save()}}n.$inject=["BaseComponentFunctions","$filter","EntifixResource","EntifixNotification","EntifixNotifier","$scope","$timeout","$rootScope"];var e={templateUrl:"dist/shared/components/entifixEntityForm/entifixEntityForm.html",controller:n,controllerAs:"bindCtrl",bindings:{componentConstruction:"<",componentBehavior:"<",componentBindingOut:"=",queryDetails:"="}};t.component("entifixEntityForm",e)}(),function(){function t(n,t){var i=this,e=Math.floor(100*Math.random()+1);function o(t){for(var n="!@#$^&%*()+=-[]/{}|:<>?,.",e=0;e<n.length;e++)t=t.replace(new RegExp("\\"+n[e],"gi"),"");return t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/ /g,"")).replace(/á/gi,"a")).replace(/é/gi,"e")).replace(/í/gi,"i")).replace(/ó/gi,"o")).replace(/ú/gi,"u")).replace(/ñ/gi,"n")}i.canShowEditableFields={get:function(){return!!i.showEditableFields&&i.showEditableFields()}},i.canEvaluateErrors={get:function(){return!!i.evaluateErrors&&i.evaluateErrors({name:i.name.get()})}},i.isRequired={get:function(){return!(!i.componentConstruction||!i.componentConstruction.isRequired)&&i.componentConstruction.isRequired}},i.requiredMessage={get:function(){if(i.componentConstruction&&i.componentConstruction.requiredMessage){if(i.componentConstruction.requiredMessage.getter)return i.componentConstruction.requiredMessage.getter();if(i.componentConstruction.requiredMessage.text)return i.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},i.parseMessage={get:function(){if(i.componentConstruction&&i.componentConstruction.parseMessage){if(i.componentConstruction.parseMessage.getter)return i.componentConstruction.parseMessage.getter();if(i.componentConstruction.parseMessage.text)return i.componentConstruction.parseMessage.text}return i.hasDate.get()&&i.hasTime.get()?"Este campo debe ser una fecha y hora válidas":i.hasDate.get()&&!i.hasTime.get()?"Este campo debe ser una fecha válida":i.hasTime.get()&&!i.hasDate.get()?"Este campo debe ser una hora válida":void 0}},i.isDisabled={get:function(){return!(!i.componentConstruction||!i.componentConstruction.isDisabled)&&i.componentConstruction.isDisabled}},i.title={get:function(){if(i.componentConstruction&&i.componentConstruction.title){if(i.componentConstruction.title.getter)return i.componentConstruction.title.getter();if(i.componentConstruction.title.text)return i.componentConstruction.title.text}return""}},i.name={get:function(){return""!=o(i.title.get())?o(i.title.get()):"entifixdatetimepicker"+e}},i.isForm={get:function(){return!i.componentConstruction||null==i.componentConstruction.isForm||i.componentConstruction.isForm}},i.disableParentScroll={get:function(){return!i.componentConstruction||null==i.componentConstruction.disableParentScroll||i.componentConstruction.disableParentScroll}},i.autoOk={get:function(){return!i.componentConstruction||null==i.componentConstruction.autoOk||i.componentConstruction.autoOk}},i.editInput={get:function(){return!i.componentConstruction||!i.componentConstruction.editInput||i.componentConstruction.editInput}},i.clickOutsideToClose={get:function(){return!(!i.componentConstruction||!i.componentConstruction.clickOutsideToClose)&&i.componentConstruction.clickOutsideToClose}},i.tooltip={get:function(){if(i.componentConstruction&&i.componentConstruction.tooltip){if(i.componentConstruction.tooltip.getter)return i.componentConstruction.tooltip.getter();if(i.componentConstruction.tooltip.text)return i.componentConstruction.tooltip.text}return null}},i.nullValueLabel={get:function(){return i.componentConstruction&&i.componentConstruction.nullValueLabel?i.componentConstruction.nullValueLabel:"SIN REGISTROS"}},i.hasDate={get:function(){return!i.componentConstruction||null==i.componentConstruction.hasDate||i.componentConstruction.hasDate}},i.placeholder={get:function(){if(i.componentConstruction&&i.componentConstruction.placeholder){if(i.componentConstruction.placeholder.getter)return i.componentConstruction.placeholder.getter();if(i.componentConstruction.placeholder.text)return i.componentConstruction.placeholder.text}var t="";return i.hasDate.get()&&(t+="dd/mm/aaaa"),i.hasTime.get()&&i.hasDate.get()?t+=" hh:mm":i.hasTime.get()&&(t+="hh:mm"),t}},i.minDate={get:function(){if(i.componentConstruction&&i.componentConstruction.minDate){if(i.componentConstruction.minDate.getter)return i.componentConstruction.minDate.getter();if(i.componentConstruction.minDate.text)return i.componentConstruction.minDate.text}return"01/01/1900"}},i.maxDate={get:function(){if(i.componentConstruction&&i.componentConstruction.maxDate){if(i.componentConstruction.maxDate.getter)return i.componentConstruction.maxDate.getter();if(i.componentConstruction.maxDate.text)return i.componentConstruction.maxDate.text}return"01/01/2100"}},i.format={get:function(){if(i.componentConstruction&&i.componentConstruction.format){if(i.componentConstruction.format.getter)return i.componentConstruction.format.getter();if(i.componentConstruction.format.text)return i.componentConstruction.format.text}var t="";return i.hasDate.get()&&(t+="DD/MM/YYYY"),i.hasTime.get()&&i.hasDate.get()?t+=" HH":i.hasTime.get()&&(t+="HH"),i.hasTime.get()&&i.shortTime.get()?t+=":mm a":i.hasTime.get()&&(t+=":mm"),t}},i.okText={get:function(){if(i.componentConstruction&&i.componentConstruction.okText){if(i.componentConstruction.okText.getter)return i.componentConstruction.okText.getter();if(i.componentConstruction.okText.text)return i.componentConstruction.okText.text}return"Aceptar"}},i.todayText={get:function(){if(i.componentConstruction&&i.componentConstruction.todayText){if(i.componentConstruction.todayText.getter)return i.componentConstruction.todayText.getter();if(i.componentConstruction.todayText.text)return i.componentConstruction.todayText.text}return"Hoy"}},i.cancelText={get:function(){if(i.componentConstruction&&i.componentConstruction.cancelText){if(i.componentConstruction.cancelText.getter)return i.componentConstruction.cancelText.getter();if(i.componentConstruction.cancelText.text)return i.componentConstruction.cancelText.text}return"Cancelar"}},i.weekStart={get:function(){if(i.componentConstruction&&i.componentConstruction.weekStart){if(i.componentConstruction.weekStart.getter)return i.componentConstruction.weekStart.getter();if(i.componentConstruction.weekStart.text)return i.componentConstruction.weekStart.text}return"0"}},i.weekDays={get:function(){return!(!i.componentConstruction||!i.componentConstruction.weekDays)&&i.componentConstruction.weekDays}},i.hasTime={get:function(){return!i.componentConstruction||null==i.componentConstruction.hasTime||i.componentConstruction.hasTime}},i.hasMinutes={get:function(){return!i.componentConstruction||null==i.componentConstruction.hasMinutes||i.componentConstruction.hasMinutes}},i.shortTime={get:function(){return!i.componentConstruction||null==i.componentConstruction.shortTime||i.componentConstruction.shortTime}},i.$onInit=function(){},i.getDateString=function(t){if(i.valueModel){var n=new Date(i.valueModel);if(n instanceof Date){var e=n,o="",r="";return i.hasTime.get()&&(o=e.getHours().toString(),r=e.getMinutes().toString(),o.length<2&&(o="0"+o),r.length<2&&(r="0"+r),o=12<(o=parseInt(o))?(o-12).toString()+":"+r+" pm":12==o?o.toString()+":"+r+" pm":o.toString()+":"+r+" am"),e.getDate()+" de "+["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][e.getMonth()]+" de "+e.getFullYear()+" "+o}return i.valueModel}if(!t)return i.nullValueLabel.get()},i.displayDialogEdit=function(){var t;i.hasDate.get()?n.show((t={date:i.hasDate.get(),time:i.hasTime.get(),minutes:i.hasMinutes.get(),format:i.format.get(),currentDate:i.valueModel||moment().startOf("day"),weekStart:i.weekStart.get(),shortTime:i.shortTime.get(),cancelText:i.cancelText.get(),todayText:i.todayText.get(),okText:i.okText.get(),amText:"am",pmText:"pm",showTodaysDate:"",weekDays:i.weekDays.get()},_defineProperty(t,"weekStart",i.weekStart.get()),_defineProperty(t,"disableParentScroll",i.disableParentScroll.get()),_defineProperty(t,"autoOk",i.autoOk.get()),_defineProperty(t,"editInput",i.editInput.get()),_defineProperty(t,"clickOutsideToClose",i.clickOutsideToClose.get()),t)).then(function(t){i.valueModel=new Date(t.toString())},function(){console.log("Selección cancelada")}):n.show({date:i.hasDate.get(),time:i.hasTime.get(),minutes:i.hasMinutes.get(),format:i.format.get(),currentDate:i.valueModel||moment().startOf("day"),shortTime:i.shortTime.get(),cancelText:i.cancelText.get(),todayText:i.todayText.get(),okText:i.okText.get(),amText:"am",pmText:"pm",showTodaysDate:"",disableParentScroll:i.disableParentScroll.get(),autoOk:i.autoOk.get(),clickOutsideToClose:i.clickOutsideToClose.get()}).then(function(t){i.valueModel=new Date(t.toString())},function(){console.log("Selección cancelada")})},i.runOnChangeTrigger=function(){i.onChange&&i.onChange({value:i.valueModel})},t.$watch(function(){return i.valueModel},function(t,n){i.onChange&&i.onChange({value:t})})}t.$inject=["mdcDateTimeDialog","$scope"];var n={bindings:{valueModel:"=",showEditableFields:"&",evaluateErrors:"&",componentConstruction:"<",onChange:"&"},templateUrl:"dist/shared/components/entifixDateTimePicker/entifixDateTimePicker.html",controller:t,controllerAs:"vm"};angular.module("entifix-js").component("entifixDateTimePicker",n)}(),function(){function t(t){var n=this,e=Math.floor(100*Math.random()+1);function o(t){for(var n="!@#$^&%*()+=-[]/{}|:<>?,.",e=0;e<n.length;e++)t=t.replace(new RegExp("\\"+n[e],"gi"),"");return t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/ /g,"")).replace(/á/gi,"a")).replace(/é/gi,"e")).replace(/í/gi,"i")).replace(/ó/gi,"o")).replace(/ú/gi,"u")).replace(/ñ/gi,"n")}n.canShowEditableFields={get:function(){return!!n.showEditableFields&&n.showEditableFields()}},n.canEvaluateErrors={get:function(){return!!n.evaluateErrors&&n.evaluateErrors({name:n.name.get()})}},n.isRequired={get:function(){return!(!n.componentConstruction||!n.componentConstruction.isRequired)&&n.componentConstruction.isRequired}},n.requiredMessage={get:function(){if(n.componentConstruction&&n.componentConstruction.requiredMessage){if(n.componentConstruction.requiredMessage.getter)return n.componentConstruction.requiredMessage.getter();if(n.componentConstruction.requiredMessage.text)return n.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},n.maxLength={get:function(){return n.componentConstruction&&n.componentConstruction.maxLength?n.componentConstruction.maxLength:null}},n.maxLengthMessage={get:function(){if(n.componentConstruction&&n.componentConstruction.maxLengthMessage){if(n.componentConstruction.maxLengthMessage.getter)return n.componentConstruction.maxLengthMessage.getter();if(n.componentConstruction.maxLengthMessage.text)return n.componentConstruction.maxLengthMessage.text}return"El texto es demasiado largo"}},n.minLength={get:function(){return n.componentConstruction&&n.componentConstruction.minLength?n.componentConstruction.minLength:null}},n.minLengthMessage={get:function(){if(n.componentConstruction&&n.componentConstruction.minLengthMessage){if(n.componentConstruction.minLengthMessage.getter)return n.componentConstruction.minLengthMessage.getter();if(n.componentConstruction.minLengthMessage.text)return n.componentConstruction.minLengthMessage.text}return"El texto es demasiado corto"}},n.emailMessage={get:function(){if(n.componentConstruction&&n.componentConstruction.emailMessage){if(n.componentConstruction.emailMessage.getter)return n.componentConstruction.emailMessage.getter();if(n.componentConstruction.emailMessage.text)return n.componentConstruction.emailMessage.text}return"Ingrese una dirección de correo válida"}},n.urlMessage={get:function(){if(n.componentConstruction&&n.componentConstruction.urlMessage){if(n.componentConstruction.urlMessage.getter)return n.componentConstruction.urlMessage.getter();if(n.componentConstruction.urlMessage.text)return n.componentConstruction.urlMessage.text}return"Ingrese una dirección URL válida"}},n.numberMessage={get:function(){if(n.componentConstruction&&n.componentConstruction.numberMessage){if(n.componentConstruction.numberMessage.getter)return n.componentConstruction.numberMessage.getter();if(n.componentConstruction.numberMessage.text)return n.componentConstruction.numberMessage.text}return"Ingrese una número válido"}},n.title={get:function(){if(n.componentConstruction&&n.componentConstruction.title){if(n.componentConstruction.title.getter)return n.componentConstruction.title.getter();if(n.componentConstruction.title.text)return n.componentConstruction.title.text}return""}},n.name={get:function(){return""!=o(n.title.get())?o(n.title.get()):"entifixinput"+e}},n.isTextArea={get:function(){return!(!n.componentConstruction||!n.componentConstruction.isTextArea)}},n.type={get:function(){return n.componentConstruction&&n.componentConstruction.type?n.componentConstruction.type:"text"}},n.isForm={get:function(){return!n.componentConstruction||null==n.componentConstruction.isForm||n.componentConstruction.isForm}},n.rows={get:function(){return n.componentConstruction&&n.componentConstruction.rows?n.componentConstruction.rows:1}},n.tooltip={get:function(){if(n.componentConstruction&&n.componentConstruction.tooltip){if(n.componentConstruction.tooltip.getter)return n.componentConstruction.tooltip.getter();if(n.componentConstruction.tooltip.text)return n.componentConstruction.tooltip.text}return null}},n.modelOptions={get:function(){return n.componentConstruction&&n.componentConstruction.modelOptions?n.componentConstruction.modelOptions:{}}},n.numberValidation={get:function(){return!(!n.componentConstruction||!n.componentConstruction.numberValidation)&&n.componentConstruction.numberValidation}},n.format={get:function(){return n.componentConstruction&&n.componentConstruction.format?n.componentConstruction.format:null}},n.currency={get:function(){return n.componentConstruction&&n.componentConstruction.currency?n.componentConstruction.currency:""}},n.nullValueLabel={get:function(){return n.componentConstruction&&n.componentConstruction.nullValueLabel?n.componentConstruction.nullValueLabel:"SIN REGISTROS"}},n.$onInit=function(){n.init&&n.init()},n.runOnChangeTrigger=function(){n.onChange&&n.onChange({value:n.valueModel})},n.getDisplay=function(){return n.valueModel?n.format.get()?t(n.format.get())(n.valueModel,n.currency.get()):n.valueModel:n.nullValueLabel.get()}}t.$inject=["$filter"];var n={bindings:{valueModel:"=",showEditableFields:"&",evaluateErrors:"&",componentConstruction:"<",onChange:"&"},templateUrl:"dist/shared/components/entifixInput/entifixInput.html",controller:t,controllerAs:"vm"};angular.module("entifix-js").component("entifixInput",n)}(),function(){function t(n,t,e,o,r){var i=this;function c(t){localStorage.setItem(n.authTokenName,t.data.data[0][n.authTokenName]),r.reload(),o.hide(i.workgroupName)}function u(){swal("¡Error!","Ocurrió un error al intentar elegir una bodega. Por favor intentelo de nuevo o contacte a su administrador de Sistemas.","error")}i.cancel=function(){o.cancel()},i.ok=function(){e({method:"PUT",url:t.baseUrl+t.api+t.login,data:{subject:n.subject,workgroupId:i.workgroupId}}).then(c,u)},i.setWorkgroupId=function(t){t&&(i.workgroupId=t.id)},e({method:"GET",url:t.baseUrl+t.api+"catalogo/bodega?administradores.nip="+n.subject}).then(function(t){t.data.data&&(i.workgroups=t.data.data)}),n.currentWorkgroup&&e({method:"GET",url:t.baseUrl+t.api+"catalogo/bodega?id="+n.currentWorkgroup}).then(function(t){t.data.data[0]&&(i.workgroupName=t.data.data[0].nombreBodega)})}angular.module("entifix-js").controller("PreconditionFailedErrorController",t),t.$inject=["sessionData","AppResources","$http","$mdDialog","$state"]}(),function(){function t(){var n=this,t=Math.floor(100*Math.random()+1);function e(t){for(var n="!@#$^&%*()+=-[]/{}|:<>?,.",e=0;e<n.length;e++)t=t.replace(new RegExp("\\"+n[e],"gi"),"");return t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/ /g,"")).replace(/á/gi,"a")).replace(/é/gi,"e")).replace(/í/gi,"i")).replace(/ó/gi,"o")).replace(/ú/gi,"u")).replace(/ñ/gi,"n")}n.isLoading={get:function(){return n.queryDetails&&n.queryDetails.resource&&n.queryDetails.resource.isLoading.get(),!1}},n.canShowEditableFields={get:function(){return!!n.showEditableFields&&n.showEditableFields()}},n.canEvaluateErrors={get:function(){return!!n.evaluateErrors&&n.evaluateErrors({name:n.name.get()})}},n.isRequired={get:function(){return!(!n.componentConstruction||!n.componentConstruction.isRequired)&&n.componentConstruction.isRequired}},n.requiredMessage={get:function(){if(n.componentConstruction&&n.componentConstruction.requiredMessage){if(n.componentConstruction.requiredMessage.getter)return n.componentConstruction.requiredMessage.getter();if(n.componentConstruction.requiredMessage.text)return n.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},n.title={get:function(){if(n.componentConstruction&&n.componentConstruction.title){if(n.componentConstruction.title.getter)return n.componentConstruction.title.getter();if(n.componentConstruction.title.text)return n.componentConstruction.title.text}return""}},n.name={get:function(){return""!=e(n.title.get())?e(n.title.get()):"entifixradiobutton"+t}},n.isForm={get:function(){return!n.componentConstruction||null==n.componentConstruction.isForm||n.componentConstruction.isForm}},n.isMultipleDisplay={get:function(){return!(!n.componentConstruction||!n.componentConstruction.isMultipleDisplay)&&n.componentConstruction.isMultipleDisplay}},n.tooltip={get:function(){if(n.componentConstruction&&n.componentConstruction.tooltip){if(n.componentConstruction.tooltip.getter)return n.componentConstruction.tooltip.getter();if(n.componentConstruction.tooltip.text)return n.componentConstruction.tooltip.text}return null}},n.$onInit=function(){n.isMultipleDisplay.get()?(n.parameters={displayProperties:n.componentConstruction.displayProperties,actionSuccess:function(t){n.items=t},actionError:n.queryDetails.actionError,filters:n.queryDetails.filters},n.queryDetails.resource.getEnumerationBindMultiDisplay(n.parameters)):n.queryDetails.resource.getEnumerationBind(n.componentConstruction.displayPropertyName,function(t){n.items=t}),n.componentBindingOut={selectedEntity:{get:function(){return n.getValue()}}},n.init&&n.init()},n.getDisplayValue=function(){if(n.valueModel&&n.items&&0<n.items.length){var t=n.items.filter(function(t){return t.Value==n.valueModel})[0];if(t)return t.Display}return null},n.getValue=function(){if(n.valueModel&&n.items&&0<n.items.length){var t=n.items.filter(function(t){return t.Value==n.valueModel})[0];if(t)return t}return null},n.runOnChangeTrigger=function(){var t=n.items.filter(function(t){return t.Value==n.valueModel})[0];n.onChange&&n.onChange({oldValue:n.valueModel,newValue:n.valueModel,entity:t})}}t.$inject=[];var n={bindings:{valueModel:"=",showEditableFields:"&",evaluateErrors:"&",queryDetails:"<",componentConstruction:"<",componentBindingOut:"=",onChange:"&"},templateUrl:"dist/shared/components/entifixRadioButton/entifixRadioButton.html",controller:t,controllerAs:"vm"};angular.module("entifix-js").component("entifixRadioButton",n)}(),function(){function t(){var e=this,t=Math.floor(100*Math.random()+1);function n(t){for(var n="!@#$^&%*()+=-[]/{}|:<>?,.",e=0;e<n.length;e++)t=t.replace(new RegExp("\\"+n[e],"gi"),"");return t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/ /g,"")).replace(/á/gi,"a")).replace(/é/gi,"e")).replace(/í/gi,"i")).replace(/ó/gi,"o")).replace(/ú/gi,"u")).replace(/ñ/gi,"n")}e.isLoading={get:function(){return e.queryDetails&&e.queryDetails.resource&&e.queryDetails.resource.isLoading.get(),!1}},e.canShowEditableFields={get:function(){return!!e.showEditableFields&&e.showEditableFields()}},e.canEvaluateErrors={get:function(){return!!e.evaluateErrors&&e.evaluateErrors({name:e.name.get()})}},e.isRequired={get:function(){return!(!e.componentConstruction||!e.componentConstruction.isRequired)&&e.componentConstruction.isRequired}},e.requiredMessage={get:function(){if(e.componentConstruction&&e.componentConstruction.requiredMessage){if(e.componentConstruction.requiredMessage.getter)return e.componentConstruction.requiredMessage.getter();if(e.componentConstruction.requiredMessage.text)return e.componentConstruction.requiredMessage.text}return"Este campo es obligatorio"}},e.multipleMessage={get:function(){if(e.componentConstruction&&e.componentConstruction.multipleMessage){if(e.componentConstruction.multipleMessage.getter)return e.componentConstruction.multipleMessage.getter();if(e.componentConstruction.multipleMessage.text)return e.componentConstruction.multipleMessage.text}return"Error en la elección del elemento, vuelva a seleccionarlo"}},e.title={get:function(){if(e.componentConstruction&&e.componentConstruction.title){if(e.componentConstruction.title.getter)return e.componentConstruction.title.getter();if(e.componentConstruction.title.text)return e.componentConstruction.title.text}return""}},e.name={get:function(){return""!=n(e.title.get())?n(e.title.get()):"entifixselect"+t}},e.isForm={get:function(){return!e.componentConstruction||null==e.componentConstruction.isForm||e.componentConstruction.isForm}},e.isMultipleDisplay={get:function(){return!(!e.componentConstruction||!e.componentConstruction.isMultipleDisplay)&&e.componentConstruction.isMultipleDisplay}},e.isMultiple={get:function(){return!(!e.componentConstruction||!e.componentConstruction.isMultiple)&&e.componentConstruction.isMultiple}},e.tooltip={get:function(){if(e.componentConstruction&&e.componentConstruction.tooltip){if(e.componentConstruction.tooltip.getter)return e.componentConstruction.tooltip.getter();if(e.componentConstruction.tooltip.text)return e.componentConstruction.tooltip.text}return null}},e.collection={get:function(){if(e.componentConstruction&&e.componentConstruction.collection){if(e.componentConstruction.collection.getter)return e.componentConstruction.collection.getter();if(e.componentConstruction.collection.elements)return e.componentConstruction.collection.elements}return null}},e.nullValueLabel={get:function(){return e.componentConstruction&&e.componentConstruction.nullValueLabel?e.componentConstruction.nullValueLabel:"SIN REGISTROS"}},e.$onInit=function(){e.collection.get()?e.items=e.collection.get():e.isMultipleDisplay.get()?(e.parameters={displayProperties:e.componentConstruction.displayProperties,actionSuccess:function(t){e.items=t},actionError:e.queryDetails.actionError,filters:e.queryDetails.filters},e.queryDetails.resource.getEnumerationBindMultiDisplay(e.parameters)):e.queryDetails.resource.getEnumerationBind(e.componentConstruction.displayPropertyName,function(t){e.items=t}),e.componentBindingOut={selectedEntity:{get:function(){return e.getValue()}}},e.init&&e.init(),e.searchText},e.getDisplayValue=function(){if(e.isMultiple.get()){if(e.valueModel&&e.items&&0<e.items.length){var t="";if(e.valueModel.forEach(function(n){t+=e.items.filter(function(t){return t.Value==n})[0].Display}),t)return t}}else if(e.valueModel&&e.items&&0<e.items.length&&(t=e.items.filter(function(t){return t.Value==e.valueModel})[0]))return t.Display;return e.nullValueLabel.get()},e.getValue=function(){if(e.valueModel&&e.items&&0<e.items.length){var t=e.items.filter(function(t){return t.Value==e.valueModel})[0];if(t)return t}return null},e.runOnChangeTrigger=function(){var t=e.items.filter(function(t){return t.Value==e.valueModel})[0];e.onChange&&e.onChange({oldValue:e.valueModel,newValue:e.valueModel,entity:t})},e.cleanSearch=function(){e.searchText=""}}t.$inject=[];var n={bindings:{valueModel:"=",showEditableFields:"&",evaluateErrors:"&",queryDetails:"<",componentConstruction:"<",componentBindingOut:"=",onChange:"&"},templateUrl:"dist/shared/components/entifixSelect/entifixSelect.html",controller:t,controllerAs:"vm"};angular.module("entifix-js").component("entifixSelect",n)}(),function(){var t=angular.module("entifix-js");function n(t,n,e,o,r,i,c,u,s,a){var l=this;l.componentConstruction=c(),l.componentBehavior=u(),l.componentBindingOut=s(),l.queryDetails=a();var p={edit:1,view:2},m=p.edit;l.entity={get:function(){return l.connectionComponent?l.connectionComponent.entity:null},set:function(t){if(l.connectionComponent){var n=l.connectionComponent.entity;l.connectionComponent.entity=t,l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onChangeEntity&&l.componentBehavior.events.onChangeEntity(n,t)}}},l.isLoading={get:function(){return!(!l.queryDetails||!l.queryDetails.resource)&&l.queryDetails.resource.isLoading.get()}},l.isSaving={get:function(){return!(!l.queryDetails||!l.queryDetails.resource)&&l.queryDetails.resource.isSaving.get()}},l.isDeleting={get:function(){return!(!l.queryDetails||!l.queryDetails.resource)&&l.queryDetails.resource.isDeleting.get()}},l.onTask={get:function(){return l.isLoading.get()||l.isSaving.get()||l.isDeleting.get()}},l.size={get:function(){return l.componentConstruction&&l.componentConstruction.size?l.componentConstruction.size:"md-md"}},l.title={get:function(){if(l.componentConstruction&&l.componentConstruction.title){if(l.componentConstruction.title.entityName)return l.connectionComponent.showEditableFields.get()?"Agregar "+l.componentConstruction.title.entityName:"Editar "+l.componentConstruction.title.entityName;if(l.componentConstruction.title.entityProperty&&l.entity.get())return l.connectionComponent.showEditableFields.get()?"Agregar "+l.entity.get()[l.componentConstruction.title.entityProperty]:"Editar "+l.entity.get()[l.componentConstruction.title.entityProperty];if(l.componentConstruction.title.getter)return l.componentConstruction.title.getter();if(l.componentConstruction.title.text)return l.componentConstruction.title.text}return l.connectionComponent.showEditableFields.get()?"Agregar Registro":"Editar Registro"}},l.icon={get:function(){return l.componentConstruction&&l.componentConstruction.icon&&l.componentConstruction.icon.text?l.componentConstruction.icon.text:"menu"}},l.canCancel={get:function(){return!(!l.componentConstruction||!l.componentConstruction.cancel||m!=p.edit)}},l.cancelIcon={get:function(){return l.componentConstruction&&l.componentConstruction.cancel&&l.componentConstruction.cancel.icon?l.componentConstruction.cancel.icon:"clear"}},l.cancelText={get:function(){if(l.componentConstruction&&l.componentConstruction.cancel&&l.componentConstruction.cancel.text){if(l.componentConstruction.cancel.text.getter)return l.componentConstruction.cancel.text.getter();if(l.componentConstruction.cancel.text)return l.componentConstruction.cancel.text}return"Cancelar"}},l.cancelHref={get:function(){return l.componentConstruction&&l.componentConstruction.cancel&&l.componentConstruction.cancel.href?l.componentConstruction.cancel.href instanceof Object&&l.componentConstruction.cancel.href.getter?l.componentConstruction.cancel.href.getter(l.entity.get(),l.queryDetails.resource):l.componentConstruction.cancel.href:null}},l.canOk={get:function(){return!(!l.componentConstruction||!l.componentConstruction.ok||m!=p.view)}},l.okIcon={get:function(){return l.componentConstruction&&l.componentConstruction.ok&&l.componentConstruction.ok.icon?l.componentConstruction.ok.icon:"done"}},l.okText={get:function(){return l.componentConstruction&&l.componentConstruction.ok&&l.componentConstruction.ok.text?""+l.componentConstruction.ok.text:"Aceptar"}},l.canEdit={get:function(){return!(!(l.componentConstruction&&l.componentConstruction.edit&&l.queryDetails&&l.queryDetails.resource&&l.entity.get())||l.queryDetails.resource.isNewEntity(l.entity.get())||m!=p.view)}},l.editIcon={get:function(){return l.componentConstruction&&l.componentConstruction.edit&&l.componentConstruction.edit.icon?l.componentConstruction.edit.icon:"create"}},l.editText={get:function(){if(l.componentConstruction&&l.componentConstruction.edit){if(l.componentConstruction.edit.text instanceof Object&&l.componentConstruction.edit.text.getter)return l.componentConstruction.edit.text.getter();if(l.componentConstruction.edit.text)return l.componentConstruction.edit.text}return"Editar"}},l.editHref={get:function(){return l.componentConstruction&&l.componentConstruction.edit&&l.componentConstruction.edit.href?l.componentConstruction.edit.href instanceof Object&&l.componentConstruction.edit.href.getter?l.componentConstruction.edit.href.getter(l.entity.get(),l.queryDetails.resource):l.componentConstruction.edit.href:null}},l.canSave={get:function(){return!(!l.componentConstruction||!l.componentConstruction.save||m!=p.edit)}},l.saveIcon={get:function(){return l.componentConstruction&&l.componentConstruction.save&&l.componentConstruction.save.icon?""+l.componentConstruction.save.icon:"save"}},l.saveText={get:function(){if(l.componentConstruction&&l.componentConstruction.save){if(l.componentConstruction.save.text instanceof Object&&l.componentConstruction.save.text.getter)return l.componentConstruction.save.text.getter();if(l.componentConstruction.save.text)return l.componentConstruction.save.text}return"Guardar"}},l.saveHref={get:function(){return l.componentConstruction&&l.componentConstruction.save&&l.componentConstruction.save.href?l.componentConstruction.save.href instanceof Object&&l.componentConstruction.save.href.getter?l.componentConstruction.save.href.getter(l.entity.get(),l.queryDetails.resource):l.componentConstruction.save.href:null}},l.canRemove={get:function(){return!(!(l.componentConstruction&&l.componentConstruction.remove&&l.queryDetails&&l.queryDetails.resource&&l.entity.get())||l.queryDetails.resource.isNewEntity(l.entity.get())||m!=p.edit)}},l.removeIcon={get:function(){return l.componentConstruction&&l.componentConstruction.remove&&l.componentConstruction.remove.icon?l.componentConstruction.remove.icon:"delete"}},l.removeText={get:function(){if(l.componentConstruction&&l.componentConstruction.remove){if(l.componentConstruction.remove.text instanceof Object&&l.componentConstruction.remove.text.getter)return l.componentConstruction.remove.text.getter();if(l.componentConstruction.remove.text)return l.componentConstruction.remove.text}return"Eliminar"}},l.removeHref={get:function(){return l.componentConstruction&&l.componentConstruction.remove&&l.componentConstruction.remove.href?l.componentConstruction.remove.href instanceof Object&&l.componentConstruction.remove.href.getter?l.componentConstruction.remove.href.getter(l.entity.get(),l.queryDetails.resource):l.componentConstruction.remove.href:null}},l.canProcess={get:function(){return!(!(l.componentConstruction&&l.componentConstruction.process&&m==p.view&&l.queryDetails&&l.queryDetails.resource&&l.entity.get())||l.queryDetails.resource.isNewEntity(l.entity.get())||l.queryDetails.resource.isProcessedEntity(l.entity.get()))}},l.processIcon={get:function(){return l.componentConstruction&&l.componentConstruction.process&&l.componentConstruction.process.icon?l.componentConstruction.process.icon:"done_all"}},l.processText={get:function(){return l.componentConstruction&&l.componentConstruction.process&&l.componentConstruction.process.text?""+l.componentConstruction.process.text:"Procesar"}},l.allowActions={get:function(){return!l.componentConstruction||null==l.componentConstruction.allowActions||l.componentConstruction.allowActions}},l.saveTooltip={get:function(){return l.componentConstruction&&l.componentConstruction.saveTooltip?l.componentConstruction.saveTooltip:"Todos los campos obligatorios deben estar correctos"}},l.historyTooltip={get:function(){return l.componentConstruction&&l.componentConstruction.historyTooltip?l.componentConstruction.historyTooltip:"Mostrar Bitácora"}};var g=!0;function f(){var t=o.CreateStringHtmlComponentAndBindings(l.componentConstruction,"bindCtrl.connectionComponent.objectBindings");l.stringhtmlcomponent=t.stringhtml,l.connectionComponent.objectBindings=t.objectbindings}function C(){t.hide()}function d(){l.queryDetails.resource.saveEntity(l.connectionComponent.entity,function(t,n){n&&(t&&t.data.data[0]&&l.entity.set(t.data.data[0]),C())})}function h(t,n){m=t?p.view:p.edit,l.entity.set(n)}l.canViewHistory={get:function(){return!!g},set:function(t){g=t}},l.history={get:function(){return i.showHistory},set:function(){i.showHistory=!i.showHistory}},l.cancel=function(){l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onCancel&&l.componentBehavior.events.onCancel(),l.componentConstruction.cancel.customAction?l.componentConstruction.cancel.customAction():l.queryDetails.resource.isNewEntity(l.connectionComponent.entity)?t.cancel():(m=p.view,l.entity.get()&&l.queryDetails.resource.loadAsResource(l.entity.get(),function(t){l.entity.set(t)})),l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onCanceled&&l.componentBehavior.events.onCanceled()},l.ok=function(){l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onOk&&l.componentBehavior.events.onOk(),l.componentConstruction.ok.customAction?l.componentConstruction.ok.customAction(C):C(),l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onAfterOk&&l.componentBehavior.events.onAfterOk()},l.edit=function(){l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onEdit&&l.componentBehavior.events.onEdit(),l.componentConstruction.edit.customAction?l.componentConstruction.edit.customAction(l.entity.get(),C):m=p.edit,l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onEdited&&l.componentBehavior.events.onEdited()},l.save=function(){l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onSave&&l.componentBehavior.events.onSave(l.entity.get()),l.componentConstruction.save.customAction?l.componentConstruction.save.customAction(l.entity.get(),C,h):d(),l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onSaved&&l.componentBehavior.events.onSaved()},l.remove=function(){l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onRemove&&l.componentBehavior.events.onRemove(),l.componentConstruction.remove.customAction?l.componentConstruction.remove.customAction(l.entity.get(),C):r.confirm("Está seguro de eliminar el registro","Confirmación requerida",function(){l.queryDetails.resource.deleteEntity(l.connectionComponent.entity,function(){C()})}),l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onRemoved&&l.componentBehavior.events.onRemoved()},l.process=function(){l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onProcess&&l.componentBehavior.events.onProcess(),l.componentConstruction.process.customAction?l.componentConstruction.process.customAction(l.entity.get(),C,h):(l.connectionComponent.entity[l.queryDetails.resource.getOpProperty.get()]="PROCESAR",d()),l.componentBehavior&&l.componentBehavior.events&&l.componentBehavior.events.onProcessed&&l.componentBehavior.events.onProcessed()},l.submit=function(){l.save()},new n(l.queryDetails.resource),l.connectionComponent={},l.connectionComponent.IsCreating=!0,l.componentBindingOut.object?(m=p.view,l.entity.set(l.componentBindingOut.object)):l.entity.set({}),l.connectionComponent.entity=l.entity.get(),l.queryDetails.resource&&(l.connectionComponent.resource=l.queryDetails.resource),l.connectionComponent.showEditableFields={get:function(){return m==p.edit},set:function(t){1==t&&(m=p.edit),0==t&&(m=p.view)}},l.connectionComponent.isSaving=l.isSaving,l.connectionComponent.history=l.history,l.connectionComponent.canViewHistory=l.canViewHistory,l.connectionComponent.canCancel={get:function(){return l.canCancel.get()}},l.connectionComponent.canRemove={get:function(){return l.canRemove.get()}},l.connectionComponent.canSave={get:function(){return l.canSave.get()}},l.connectionComponent.canEdit={get:function(){return l.canEdit.get()}},l.connectionComponent.canOk={get:function(){return l.canOk.get()}},l.connectionComponent.canProcess={get:function(){return l.canProcess.get()}},l.connectionComponent.cancelText={get:function(){return l.cancelText.get()}},l.connectionComponent.removeText={get:function(){return l.removeText.get()}},l.connectionComponent.saveText={get:function(){return l.saveText.get()}},l.connectionComponent.editText={get:function(){return l.editText.get()}},l.connectionComponent.okText={get:function(){return l.okText.get()}},l.connectionComponent.processText={get:function(){return l.processText.get()}},l.connectionComponent.cancelIcon={get:function(){return l.cancelIcon.get()}},l.connectionComponent.removeIcon={get:function(){return l.removeIcon.get()}},l.connectionComponent.saveIcon={get:function(){return l.saveIcon.get()}},l.connectionComponent.editIcon={get:function(){return l.editIcon.get()}},l.connectionComponent.okIcon={get:function(){return l.okIcon.get()}},l.connectionComponent.processIcon={get:function(){return l.processIcon.get()}},l.connectionComponent.cancel={invoke:function(){l.cancel()}},l.connectionComponent.remove={invoke:function(){l.remove()}},l.connectionComponent.edit={invoke:function(){l.edit()}},l.connectionComponent.ok={invoke:function(){l.ok()}},l.connectionComponent.save={invoke:function(){l.save()}},l.connectionComponent.process={invoke:function(){l.process()}},l.connectionComponent.onTask={get:function(){return l.onTask.get()}},l.connectionComponent.saveTooltip={get:function(){return l.saveTooltip.get()}},l.connectionComponent.entityForm={valid:function(){return l.entityForm.$valid}},l.connectionComponent.evaluateErrors={get:function(t){return function(n){var e={};for(var o in l.entityForm.$error){var t=l.entityForm.$error[o];t instanceof Array&&t.forEach(function(t){t.$name==n&&(e[o]=!0)})}return e}(t)}},function t(){l.entityForm?l.connectionComponent.entityForm=l.entityForm:e(t,200)}(),l.componentConstruction&&f(),l.componentBindingOut={showEditableFields:l.connectionComponent.showEditableFields,entity:l.entity,recreateDynamicComponent:f},l.componentBehavior&&l.componentBehavior.afterConstruction&&l.componentBehavior.afterConstruction()}function e(s){return function(r,i,c,u){this.openModal=function(){if(r&&r.event)var t=r.event;if(r&&null!=r.clickOutsideToClose)var n=r.clickOutsideToClose;else n=!1;if(r&&null!=r.escapeToClose)var e=r.escapeToClose;else e=!0;if(r&&null!=r.fullscreen)var o=r.fullscreen;else o=!0;s.show({templateUrl:"dist/shared/controls/entifixEntityModal/entifixEntityModal.html",controller:"EntifixEntityModalController",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:n,escapeToClose:e,fullscreen:o,controllerAs:"bindCtrl",multiple:!0,locals:{componentConstruction:function(){return r},componentBehavior:function(){return i},componentBindingOut:function(){return c},queryDetails:function(){return u}}}).then(function(t){},function(){})}}}t.controller("EntifixEntityModalController",n),n.$inject=["$mdDialog","EntifixNotifier","$timeout","BaseComponentFunctions","EntifixNotification","$rootScope","componentConstruction","componentBehavior","componentBindingOut","queryDetails"],t.factory("EntifixEntityModal",e),e.$inject=["$mdDialog"]}(),function(){var t=angular.module("entifix-js");function n(n,i,t,e,o,r,c,u){var s,a,l,p,m=this,g=0,f=!0,C=!0,d=!0;function h(){var t=n.CreateStringHtmlComponentAndBindings(m.componentConstruction,"bindCtrl.connectionComponent.objectBindings");m.stringhtmlcomponent=t.stringhtml,m.connectionComponent.objectBindings=t.objectbindings}function v(t,n,e){if("date"==n||"datetime"==n&&t){var o=(t=new Date(t)).getFullYear().toString(),r=(t.getMonth()+1).toString(),i=t.getDate().toString();if(r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),"datetime"==n){var c=t.getHours().toString(),u=t.getMinutes().toString(),s=t.getSeconds().toString();return c.length<2&&(c="0"+c),u.length<2&&(u="0"+u),s.length<2&&(s="0"+s),e?i+"-"+r+"-"+o+" "+c+":"+u+":"+s:o+"-"+r+"-"+i+" "+c+":"+u+":"+s}return e?i+"-"+r+"-"+o:o+"-"+r+"-"+i}return t}function y(){return m.connectionComponent.pager.reload(),null}function x(){a&&(t.cancel(a),a=null)}function D(){m.tablePropertiesNavigation.forEach(function(t){t.$selected?t.class="md-column sortable sort-descent":0==t.$selected?t.class="md-column sortable sort-ascent":t.class="md-column sortable"})}function b(t,n){m.searchArray.splice(n,1),0<m.searchArray.length&&0<m.textBoxSearchValueChips.length&&m.queryParams.get()?r.go(".",{customSearch:JSON.stringify(m.searchArray),chips:JSON.stringify(m.textBoxSearchValueChips)},{notify:!1}):m.queryParams.get()&&r.go(".",{customSearch:null,chips:null},{notify:!1}),m.connectionComponent.pager.reload(),l=null}function E(t,n,e){m.columnToSearch=null,m.operator=null,m.valueToSearch=null,m.textBoxSearchValue=null,l=null,t&&(n?m.queryParams.get()&&r.go(".",{customSearch:null,chips:null,searchText:null},{notify:!1}):(m.searchArray=[],m.pager.page=1,m.queryParams.get()&&r.go(".",{customSearch:null,chips:null,page:m.pager.page},{notify:!1})),m.textBoxSearchValueChips=[]),e&&(m.queryDetails.constantFilters&&(m.queryDetails.constantFilters.getter=function(){return[]}),m.startDate=null,m.endDate=null,m.notApplied=!1,r.go(".",{customSearch:null,chips:null,searchText:null,page:m.pager.page,itemsPerPage:m.pager.size,startDate:null,endDate:null},{notify:!1}))}function S(t){return t.display?t.display:t.name?(n=t.name).charAt(0).toUpperCase()+n.substring(1,n.length):null;var n}m.isLoading={get:function(){return!(!m.queryDetails||!m.queryDetails.resource)&&m.queryDetails.resource.isLoading.get()}},m.isDeleting={get:function(){return!(!m.queryDetails||!m.queryDetails.resource)&&m.queryDetails.resource.isDeleting.get()}},m.total={get:function(){return 0}},m.title={get:function(){if(m.componentConstruction&&m.componentConstruction.title){if(m.componentConstruction.title.getter)return m.componentConstruction.title.getter();if(m.componentConstruction.title.text)return m.componentConstruction.title.text}return"Listado"}},m.icon={get:function(){return m.componentConstruction&&m.componentConstruction.title&&m.componentConstruction.title.icon?m.componentConstruction.title.icon:"menu"}},m.canSearch={get:function(){return!(!m.componentConstruction||!m.componentConstruction.search)}},m.searchIcon={get:function(){return m.componentConstruction&&m.componentConstruction.search&&m.componentConstruction.search.icon?m.componentConstruction.search.icon:"search"}},m.searchText={get:function(){return m.componentConstruction&&m.componentConstruction.search&&m.componentConstruction.search.text?""+m.componentConstruction.search.text:"Buscar"}},m.canShowSearchText={get:function(){return d},set:function(t){d=t}},m.canAdd={get:function(){return!(!m.componentConstruction||!m.componentConstruction.add)}},m.multipleAddOptions={get:function(){return!!(m.componentConstruction&&m.componentConstruction.add&&m.componentConstruction.add.options)}},m.addIcon={get:function(){return m.componentConstruction&&m.componentConstruction.add&&m.componentConstruction.add.icon?m.componentConstruction.add.icon:"add"}},m.addText={get:function(){return m.componentConstruction&&m.componentConstruction.add&&m.componentConstruction.add.text?m.componentConstruction.add.text:"Nuevo"}},m.canEdit={get:function(){if(m.componentConstruction&&1==m.connectionComponent.elementsSelection())if(m.componentConstruction.edit&&null!=m.componentConstruction.edit.enable){if(m.componentConstruction.edit.enable instanceof Object&&m.componentConstruction.edit.enable.getter)return m.componentConstruction.edit.enable.getter();if(null!=m.componentConstruction.edit.enable)return m.componentConstruction.edit.enable}else if(m.componentConstruction.edit)return!0;return!1}},m.multipleEditOptions={get:function(){return!!(m.componentConstruction&&m.componentConstruction.edit&&m.componentConstruction.edit.options)}},m.editIcon={get:function(){return m.componentConstruction&&m.componentConstruction.edit&&m.componentConstruction.edit.icon?m.componentConstruction.edit.icon:"visibility"}},m.editText={get:function(){return m.componentConstruction&&m.componentConstruction.edit&&m.componentConstruction.edit.text?m.componentConstruction.edit.text:"Detalle"}},m.canRemove={get:function(){return!!(m.componentConstruction&&m.componentConstruction.remove&&1<=m.connectionComponent.elementsSelection())}},m.multipleRemoveOptions={get:function(){return!!(m.componentConstruction&&m.componentConstruction.remove&&m.componentConstruction.remove.options)}},m.removeIcon={get:function(){return m.componentConstruction&&m.componentConstruction.remove&&m.componentConstruction.remove.icon?m.componentConstruction.remove.icon:"delete"}},m.removeText={get:function(){return m.componentConstruction&&m.componentConstruction.remove&&m.componentConstruction.remove.text?m.componentConstruction.remove.text:"Eliminar"}},m.sheetIcon={get:function(){return m.componentConstruction&&m.componentConstruction.sheetIcon&&m.componentConstruction.sheetIcon.icon?m.componentConstruction.sheetIcon.icon:"poll"}},m.sheetText={get:function(){return m.componentConstruction&&m.componentConstruction.sheetText&&m.componentConstruction.sheetText.text?m.componentConstruction.sheetText.text:"Descargar Excel"}},m.canDownloadSheet={get:function(){return!m.componentConstruction||null==m.componentConstruction.canDownloadSheet||m.componentConstruction.canDownloadSheet}},m.allPagesText={get:function(){return m.componentConstruction&&m.componentConstruction.allPagesText&&m.componentConstruction.allPagesText.text?m.componentConstruction.allPagesText.text:"Descargar todas las páginas"}},m.currentPageText={get:function(){return m.componentConstruction&&m.componentConstruction.currentPageText&&m.componentConstruction.currentPageText.text?m.componentConstruction.currentPageText.text:"Descargar página actual"}},m.columnsText={get:function(){return m.componentConstruction&&m.componentConstruction.columnsText?m.componentConstruction.columnsText:"Columnas"}},m.customSearchText={get:function(){return m.componentConstruction&&m.componentConstruction.customSearchText?m.componentConstruction.customSearchText:"Búsqueda Avanzada"}},m.propertiesOperators={defaults:function(){return m.componentConstruction&&m.componentConstruction.defaultOperators?m.componentConstruction.defaultOperators:[{display:"Igual",operator:"="},{display:"Mayor que",operator:">"},{display:"Menor que",operator:"<"},{display:"Mayor o igual que",operator:">="},{display:"Menor o igual que",operator:"<="},{display:"Diferente",operator:"<>"},{display:"Incluya",operator:"%"}]},strings:function(){return m.componentConstruction&&m.componentConstruction.stringOperators?m.componentConstruction.stringOperators:[{display:"Igual",operator:"="},{display:"Diferente",operator:"<>"},{display:"Incluya",operator:"%"}]},enums:function(){return m.componentConstruction&&m.componentConstruction.enumOperators?m.componentConstruction.enumOperators:[{display:"Igual",operator:"="},{display:"Diferente",operator:"<>"}]}},m.operatorsText={get:function(){return m.componentConstruction&&m.componentConstruction.operatorsText?m.componentConstruction.operatorsText:"Operadores"}},m.searchIcon={get:function(){return m.componentConstruction&&m.componentConstruction.searchIcon?m.componentConstruction.searchIcon:"search"}},m.valueToSearchText={get:function(){return m.componentConstruction&&m.componentConstruction.valueToSearchText?m.componentConstruction.valueToSearchText:"Valor"}},m.addFilterText={get:function(){return m.componentConstruction&&m.componentConstruction.addFilterText?m.componentConstruction.addFilterText:"Agregar"}},m.selectColumns={get:function(){return!m.componentConstruction||null==m.componentConstruction.selectColumns||m.componentConstruction.selectColumns}},m.queryParams={get:function(){return!m.componentConstruction||null==m.componentConstruction.queryParams||m.componentConstruction.queryParams}},m.isMovement={get:function(){return!(!m.componentConstruction||null==m.componentConstruction.isMovement)&&m.componentConstruction.isMovement}},m.startDateText={get:function(){return m.componentConstruction&&m.componentConstruction.startDateText?m.componentConstruction.startDateText:"Fecha Documento Del"}},m.startDateProperty={get:function(){return m.queryDetails&&m.queryDetails.resource&&m.queryDetails.resource.getStartDateProperty()?m.queryDetails.resource.getStartDateProperty():"fechaDocumento"}},m.endDateText={get:function(){return m.componentConstruction&&m.componentConstruction.endDateText?m.componentConstruction.endDateText:"Fecha Documento Al"}},m.endDateProperty={get:function(){return m.queryDetails&&m.queryDetails.resource&&m.queryDetails.resource.getEndDateProperty()?m.queryDetails.resource.getEndDateProperty():"fechaDocumento"}},m.notAppliedText={get:function(){return m.componentConstruction&&m.componentConstruction.notAppliedText?m.componentConstruction.notAppliedText:{basic:"Pendientes",extended:"Mostrar únicamente registros Pendientes"}}},m.notApplyProperty={get:function(){return m.queryDetails&&m.queryDetails.resource&&m.queryDetails.resource.getNotApplyProperty()?m.queryDetails.resource.getNotApplyProperty():"estado"}},m.notApplyValue={get:function(){return m.componentConstruction&&m.componentConstruction.notApplyValue?m.componentConstruction.notApplyValue:"REGISTRADO"}},m.selectAllText={get:function(){return m.componentConstruction&&m.componentConstruction.selectAllText?m.componentConstruction.selectAllText:"Seleccionar todos"}},m.pagerConfiguration={get:function(){return m.componentConstruction&&m.componentConstruction.pagerConfiguration?m.componentConstruction.pagerConfiguration:null}},m.blockTableOnChangeView={get:function(){return!(!m.componentConstruction||!m.componentConstruction.blockTableOnChangeView)&&m.componentConstruction.blockTableOnChangeView}},m.$onInit=function(){!function(){m.searchArray=[],m.tableProperties=[],m.tablePropertiesNavigation=[],m.columnsSelected=[],m.resourceMembers=m.queryDetails.resource.getMembersResource.get(),m.resourceMembers.forEach(function(t){m.tableProperties.push({display:S(t),type:t.transformType||"text",property:t}),t.default&&m.columnsSelected.push(S(t))}),m.tablePropertiesNavigation=m.tableProperties.filter(function(t){return t.property.paginable}),D(),m.operators=m.propertiesOperators.defaults(),m.customSearchCC={title:{text:m.customSearchText.get()},tooltip:{text:m.customSearchText.get()},isSwitch:!0,isForm:!1,includeValue:!1},m.valueToSearchCC={title:{text:m.valueToSearchText.get()},hasTime:!1,hasMinutes:!1,isForm:!1,mapping:{method:function(t){return t.label}}},m.valueToSearchDTCC={title:{text:m.valueToSearchText.get()},isForm:!1},m.valueToSearchQD={title:{text:m.valueToSearchText.get()},isForm:!1},m.chipsCC=_defineProperty({isForm:!1,transformChip:m.transformchip,onRemove:m.onremove,readOnly:!0},"onRemove",b),m.startDateCC={title:{text:m.startDateText.get()},isForm:!1,hasMinutes:!1,hasTime:!1},m.endDateCC={title:{text:m.endDateText.get()},isForm:!1,hasMinutes:!1,hasTime:!1},m.notAppliedCC={title:{text:m.notAppliedText.get().basic},tooltip:{text:m.notAppliedText.get().extended},isSwitch:!0,isForm:!1,includeValue:!1},m.isMovement.get()&&(m.queryDetails.constantFilters||(m.queryDetails.constantFilters={},m.queryDetails.constantFilters.getter=function(){return[]}));m.componentConstruction.reload=m.$onInit}(),m.connectionComponent={},m.pager=new e(m.queryDetails,m.pagerConfiguration.get(),m.componentConstruction.transformData?m.componentConstruction.transformData.columns:[]),m.pager.searchTextGetter.set(function(){return m.canShowSearchText.get()&&m.textBoxSearchValue&&0<m.textBoxSearchValue.length?m.textBoxSearchValue:null}),m.pager.searchArrayGetter.set(function(){return m.canShowSearchText.get()&&m.searchArray&&0<m.searchArray.length?m.searchArray:null}),m.pager.columnsSelectedGetter.set(function(){return m.columnsSelected&&0<m.columnsSelected.length?m.columnsSelected:null}),m.connectionComponent.pager=m.pager,m.connectionComponent.tablePropertiesNavigation={get:function(){return m.tablePropertiesNavigation}},m.connectionComponent.onChangePageSize=m.onChangePageSize,m.connectionComponent.elementsSelection=function(){return null!=m.connectionComponent.pager&&null!=m.connectionComponent.pager.currentData&&0<m.connectionComponent.pager.currentData.length?m.connectionComponent.pager.currentData.filter(function(t){return 1==t.$selected}).length:0},m.connectionComponent.getSelectedElements=function(){return null!=m.connectionComponent.pager&&null!=m.connectionComponent.pager.currentData?m.connectionComponent.pager.currentData.filter(function(t){return 1==t.$selected}):[]},m.connectionComponent.sortTable=function(n){n.$selected?n.$selected=!1:n.$selected=!0,m.tablePropertiesNavigation.filter(function(t){return t.display!=n.display}).forEach(function(t){t.$selected=null}),D(),m.connectionComponent.pager.sortTableColumns.set([{property:"orderby",value:(n.property.pageProperty||n.property.name)+(n.$selected?";asc":";desc")}]),m.connectionComponent.pager.reload()},m.connectionComponent.singleElementSelection=function(n,t){m.connectionComponent.allowSelection()&&(1<m.connectionComponent.elementsSelection()||t?n.$selected=!0:n.$selected=!n.$selected,m.connectionComponent.pager.currentData.filter(function(t){return t!=n}).forEach(function(t){t.$selected=!1}),n.$selected?m.connectionComponent.selectedElement=n:m.connectionComponent.selectedElement=null,m.connectionComponent.onChangeElementsSelection())},m.connectionComponent.multipleElementsSelection=function(t){if(m.connectionComponent.allowSelection()){if(t.$selected=!t.$selected,t.$selected)m.connectionComponent.selectedElement=t;else{var n=m.connectionComponent.pager.currentData.filter(function(t){return!0===t.$selected});0<n.length?m.connectionComponent.selectedElement=n[0]:m.connectionComponent.selectedElement=null}m.connectionComponent.onChangeElementsSelection()}},m.connectionComponent.directEditionElement=function(t){m.componentConstruction.edit&&(m.blockTableOnChangeView.get()&&(m.isChangingView=!0),m.connectionComponent.singleElementSelection(t,!0),m.editElement())},m.connectionComponent.checkAll=function(t){t&&m.connectionComponent.pager.currentData?m.connectionComponent.pager.currentData.forEach(function(t){t.$selected=!0}):m.connectionComponent.pager.currentData&&m.connectionComponent.pager.currentData.forEach(function(t){t.$selected=!1})},m.connectionComponent.showColumn=function(n){var t=m.columnsSelected.filter(function(t){return t==n});return!!(t&&0<t.length)},m.connectionComponent.onChangeElementsSelection=function(){},m.connectionComponent.allowSelection=function(){return!0},m.connectionComponent.transformValue=function(t,n){if(null!=t&&m.componentConstruction&&m.componentConstruction.transformData){var e=m.componentConstruction.transformData.columns.filter(function(t){return t.property==n})[0];if("date"==e.type||"datetime"==e.type)return v(t,e.type,!0);if("navigation"==e.type&&s&&0<s.length){var o=s.filter(function(t){return t.propertyName==n});if(0<o.length){var r=o[0].enumResult;if(r&&0<r.length){var i=t;t instanceof Object&&(i=e.resource.getId(t));var c=r.filter(function(t){return t.Value==i});if(0<c.length)return c[0].Display}}}if("bool"==e.type)return t?"Si":"No"}},function(){o.page&&m.queryParams.get()&&(m.pager.page=o.page);o.itemsPerPage&&m.queryParams.get()&&(m.pager.size=o.itemsPerPage);o.searchText&&m.queryParams.get()&&(m.textBoxSearchValue=o.searchText,m.onChangeSearch());o.customSearch&&m.queryParams.get()?(m.customSearch=!0,m.searchArray=JSON.parse(o.customSearch),m.textBoxSearchValueChips=JSON.parse(o.chips)):m.customSearch=!1;o.startDate&&m.queryParams.get()&&(m.startDate=new Date(o.startDate));o.endDate&&m.queryParams.get()&&(m.endDate=new Date(o.endDate));(m.startDate||m.endDate)&&m.searchItemsDate(!0)}(),function(){m.componentConstruction&&h();m.componentBehavior&&(m.connectionComponent.showMultiselectColumn=m.componentBehavior.showMultiselectColumn||!1,m.collapsed=m.componentBehavior.initCollapsed||!1);m.connectionComponent.pager.reload()}(),m.componentBindingOut={pager:m.pager,recreateDynamicComponent:h,reloadPagination:function(){m.pager.isLoading.get()||m.pager.reload()},allowedActions:{canEdit:m.canEdit,canRemove:m.canRemove,canAdd:m.canAdd},cleanFilters:function(){m.cleanFilters()}}},m.searchElement=function(){m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onSearch&&m.componentBehavior.events.onSearch(),m.componentConstruction.search.customAction?m.componentConstruction.search.customAction():(d=!d)||(m.textBoxSearchValue=null,x(),y()),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onSearched&&m.componentBehavior.events.onSearched()},m.addElement=function(){m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onAdd&&m.componentBehavior.events.onAdd(),m.componentConstruction.add.customAction&&m.componentConstruction.add.customAction(),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onAdded&&m.componentBehavior.events.onAdded()},m.editElement=function(){var t=m.connectionComponent.selectedElement;m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onEdit&&m.componentBehavior.events.onEdit(),m.componentConstruction.edit.customAction&&m.componentConstruction.edit.customAction(t),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onEdited&&m.componentBehavior.events.onEdited()},m.removeElement=function(){var t=m.connectionComponent.getSelectedElements();m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onRemove&&m.componentBehavior.events.onRemove(),m.componentConstruction.remove.customAction?m.componentConstruction.remove.customAction(t):function(){var t="¿Está seguro de elminar el registro seleccionado?";1<m.connectionComponent.elementsSelection()&&(t="¿Está seguro de eliminar todos los registros seleccionados?");i.confirm(t,"Confirmación requerida",function(){var t=m.connectionComponent.getSelectedElements(),n=m.connectionComponent.elementsSelection(),e=0,o=0,r=function(t){t?o++:e++,n<=o+e&&(0==o?i.success("Todos los registros fueron eliminados exitosamente"):i.error("Algunos registros no pudieron ser eliminados"),m.connectionComponent.pager.reload(),m.queryDetails.resource.onMultipleDeletion.set(!1))};1<t.length&&m.queryDetails.resource.onMultipleDeletion.set(!0),m.connectionComponent.getSelectedElements().forEach(function(t){m.queryDetails.resource.deleteEntity(t,function(){r(!1)},function(){r(!0)})})})}(),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onRemoved&&m.componentBehavior.events.onRemoved()},m.processElement=function(){var t=m.connectionComponent.selectedElement;m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onProcess&&m.componentBehavior.events.onProcess(),m.componentConstruction.process.customAction&&m.componentConstruction.process.customAction(t),m.componentBehavior&&m.componentBehavior.events&&m.componentBehavior.events.onProcessed&&m.componentBehavior.events.onProcessed()},m.keypressTextBoxSearch=function(t){x(),13===t.which&&y()},m.onChangeSearch=function(){x(),a=t(y,1500),m.pager.page=1,l=null,m.queryParams.get()&&r.go(".",{searchText:m.textBoxSearchValue,page:1},{notify:!1})},m.onChangeColumn=function(){m.valueToSearch=null,m.columnToSearch&&(m.columnToSearch.property&&m.columnToSearch.property.resource&&(m.valueToSearchQD={resource:new c(m.columnToSearch.property.resource)}),"text"==m.columnToSearch.type?m.operators=m.propertiesOperators.strings():"enum"==m.columnToSearch.type?m.operators=m.propertiesOperators.enums():m.operators=m.propertiesOperators.defaults())},m.onChangeSwitch=function(t){E(!0,t),m.connectionComponent.pager.reload()},m.onChangePageSize=function(t){m.pager.totalData<m.pager.size?(m.pager.page=1,m.queryParams.get()&&r.go(".",{itemsPerPage:m.pager.size,page:1},{notify:!1})):m.queryParams.get()&&r.go(".",{itemsPerPage:m.pager.size},{notify:!1}),t?(m.pager.size=t,m.pager.reload()):C?C=!1:m.pager.reload()},m.onChangePage=function(){m.pager.reload(),m.queryParams.get()&&r.go(".",{page:m.pager.page},{notify:!1})},m.addChip=function(){m.columnToSearch.display&&m.operator.operator&&m.valueToSearch&&(m.valueToSearch=v(m.valueToSearch,m.columnToSearch.type),"%"==m.operator.operator?m.textBoxSearchValueChips.push(m.columnToSearch.display+" = "+m.operator.operator+m.valueToSearch+m.operator.operator):m.textBoxSearchValueChips.push(m.columnToSearch.display+" "+m.operator.operator+" "+m.valueToSearch),m.searchArray.push({property:m.columnToSearch.property,operator:m.operator.operator,value:m.valueToSearch})),E(),m.pager.page=1,m.queryParams.get()&&r.go(".",{customSearch:JSON.stringify(m.searchArray),chips:JSON.stringify(m.textBoxSearchValueChips),page:m.pager.page},{notify:!1}),m.connectionComponent.pager.reload()},m.cleanFilters=function(){E(!0,!1,!0),m.connectionComponent.pager.reload()},m.searchItemsDate=function(t){m.queryDetails.constantFilters.getter=function(){return[{property:m.startDateProperty.get(),value:"gte;"+v(m.startDate,"datetime")},{property:m.endDateProperty.get(),value:"lte;"+v(m.endDate,"datetime")},{property:m.notApplyProperty.get(),value:m.notApplyValue.get()}]},t||m.connectionComponent.pager.reload()},m.onChangeDateStart=function(t){r.go(".",{startDate:v(m.startDate,"datetime")},{notify:!1})},m.onChangeDateEnd=function(t){r.go(".",{endDate:v(m.endDate,"datetime")},{notify:!1})},m.onChangeNotApplied=function(t){m.queryDetails.constantFilters={};var n=[];t&&n.push({property:m.notApplyProperty.get(),value:m.notApplyValue.get()}),m.startDate&&m.endDate&&n.push({property:m.startDateProperty.get(),value:"gte;"+v(m.startDate,"datetime")},{property:m.endDateProperty.get(),value:"lte;"+v(m.endDate,"datetime")}),m.queryDetails.constantFilters.getter=function(){return n},m.connectionComponent.pager.reload()},m.selectAllItems=function(){f=!1,g%2==0?(m.columnsSelected=[],m.resourceMembers.forEach(function(t){m.columnsSelected.push(S(t))})):(m.columnsSelected=[],m.resourceMembers.forEach(function(t){t.default&&m.columnsSelected.push(S(t))})),g++},m.reloadAllSelected=function(){if(f||g%2==0){if(!f){var t=m.columnsSelected.indexOf(m.selectAllText.get());0<t&&m.columnsSelected.splice(t,1)}}else m.columnsSelected.push(m.selectAllText.get())},m.openSheetMenu=function(t,n){n,t.open(n)},m.fil=l,m.downloadSheet=function(t){l||(l=m.queryDetails.resource.getCompleteFiltersUrl.get(m.textBoxSearchValue,m.searchArray,m.columnsSelected,m.getConstantFilters())+"&export=true"),p=m.queryDetails.resource.getCompleteResourceUrl.get(),p+=t?l:"/"+(m.pager.page-1)*m.pager.size+"/"+m.pager.size+l,m.queryDetails.resource.getFile(p,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")},m.getConstantFilters=function(){var t=[];return m.pager.getConstantFilters()&&(t=t.concat(m.pager.getConstantFilters())),m.queryDetails.sort&&(t=t.concat(m.queryDetails.sort)),t}}n.$inject=["BaseComponentFunctions","EntifixNotification","$timeout","EntifixPager","$stateParams","$state","EntifixResource","$mdMenu"];var e={templateUrl:"dist/shared/components/entifixTable/entifixTable.html",controller:n,controllerAs:"bindCtrl",bindings:{componentConstruction:"<",componentBehavior:"<",componentBindingOut:"=",queryDetails:"="}};t.component("entifixTable",e)}();