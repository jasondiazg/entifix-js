<div ng-class="{'whirl double-up whirlback': vm.isLoading.get()}">
    <md-tooltip ng-if="vm.tooltip.value" md-direction="left">{{vm.tooltip.value}}</md-tooltip>
    <div ng-if="vm.isForm.value">
        <div ng-if="vm.canShowEditableFields.get()" ng-click="vm.onFocus($event)">
            <md-autocomplete
                md-floating-label={{vm.title.value}}
                md-input-name={{vm.name.value}}
                md-min-length="vm.minLengthRequest.value"
                md-input-minlength="{{vm.minLength.value}}"
                md-input-maxlength="{{vm.maxLength.value}}"
                md-no-cache="vm.noCache.value"
                md-selected-item="vm.selectedItem"
                md-search-text="vm.searchText"
                md-items="item in vm.searchItems(vm.searchText)"
                md-item-text="item"
                md-selected-item-change="vm.changeSelectedItem()"
                ng-required="vm.isRequired.value"
                md-require-match="vm.requiredMatch.value"
                placeholder="{{vm.placeholder.value}}"
                ng-disabled="vm.disabled.value"
                md-clear-button="true">
                <md-item-template>
                    <span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span>
                </md-item-template>
                <md-not-found>
                    <div>
                        {{vm.notFoundText.value}}
                    </div>
                </md-not-found>
                <div ng-messages="vm.canEvaluateErrors.get()" multiple>
                    <div ng-message="required">{{vm.requiredMessage.value}}</div>
                    <div ng-message="md-require-match">{{vm.requiredMatchMessage.value}}</div>
                    <div ng-message="minlength">{{vm.minLengthMessage.value}}</div>
                    <div ng-message="maxlength">{{vm.maxLengthMessage.value}}</div>
                </div>
            </md-autocomplete>
        </div>
        <div ng-if="!vm.canShowEditableFields.get()">
            <label>{{vm.title.value}}</label><br/>
            <strong>{{vm.display}}</strong>
        </div>
    </div>
    <div ng-if="!vm.isForm.value" ng-click="vm.onFocus($event)">
        <md-autocomplete
            md-floating-label={{vm.title.value}}
            md-input-name={{vm.name.value}}
            md-min-length="vm.minLengthRequest.value"
            md-input-minlength="{{vm.minLength.value}}"
            md-input-maxlength="{{vm.maxLength.value}}"
            md-no-cache="vm.noCache.value"
            md-selected-item="vm.selectedItem"
            md-search-text="vm.searchText"
            md-items="item in vm.searchItems(vm.searchText)"
            md-item-text="item"
            md-selected-item-change="vm.changeSelectedItem()"
            ng-required="vm.isRequired.value"
            md-require-match="vm.requiredMatch.value"
            placeholder="{{vm.placeholder.value}}"
            ng-disabled="vm.disabled.value"
            md-clear-button="true">
            <md-item-template>
                <span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item}}</span>
            </md-item-template>
            <md-not-found>
                {{vm.notFoundText.value}}
            </md-not-found>
            <div ng-messages="vm.canEvaluateErrors.get()" multiple>
                <div ng-message="required">{{vm.requiredMessage.value}}</div>
                <div ng-message="md-require-match">{{vm.requiredMatchMessage.value}}</div>
                <div ng-message="minlength">{{vm.minLengthMessage.value}}</div>
                <div ng-message="maxlength">{{vm.maxLengthMessage.value}}</div>
            </div>
        </md-autocomplete>
    </div>
</div>